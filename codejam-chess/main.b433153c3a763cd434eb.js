(()=>{"use strict";var e,t={152:(e,t,n)=>{n.r(t)},491:(e,t,n)=>{n.r(t)},262:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},778:(e,t,n)=>{n.r(t)},751:(e,t,n)=>{n.r(t)},434:(e,t,n)=>{n.r(t)},800:(e,t,n)=>{n.r(t)},604:(e,t,n)=>{n.r(t)},283:(e,t,n)=>{n.r(t)},580:(e,t,n)=>{n.r(t)},603:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},752:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var a=n(583),l=n(274),d=n(229),r=n(977),c=n(381),s=n(456),u=n(400),v=function(e){function t(){var t,n,i=e.call(this,"main",["main"])||this;return i.game=null,i.onlineGame=null,i.lobby=new c.Lobby,i.header=new r.Header,document.body.appendChild(i.header.element),i.element.appendChild(i.lobby.element),document.body.appendChild(i.element),null===(t=document.getElementById("friend"))||void 0===t||t.addEventListener("click",(function(){i.startGame()})),null===(n=document.getElementById("online"))||void 0===n||n.addEventListener("click",(function(){i.startOnlineGame()})),document.querySelectorAll(".player_name__button").forEach((function(e){e.addEventListener("click",(function(){i.handleName()}))})),i}return o(t,e),t.prototype.startGame=function(){var e;null===(e=document.querySelector(".lobby"))||void 0===e||e.classList.add("hidden"),document.querySelector(".page-name").innerText="vs Friend",this.game=new d.Game(u.storage.player1Name,u.storage.player2Name),this.handleResign(),this.handleDraw(),this.mateToLobby(),this.staleMateToLobby()},t.prototype.startOnlineGame=function(){var e;null===(e=document.querySelector(".lobby"))||void 0===e||e.classList.add("hidden"),document.querySelector(".page-name").innerText="Online",this.onlineGame=new s.OnlineGame(u.storage.player1Name)},t.prototype.handleResign=function(){var e,t,n=this;null===(e=document.getElementById("resign_white"))||void 0===e||e.addEventListener("click",(function(){var e,t=new l.EndgamePopUp("Black Won");document.body.appendChild(t.element),null===(e=t.element.querySelector(".to-lobby"))||void 0===e||e.addEventListener("click",(function(){var e,i,o,a;t.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(i=document.querySelector(".player_column"))||void 0===i||i.remove(),null===(o=document.querySelector(".chessboard"))||void 0===o||o.remove(),null===(a=document.querySelector(".lobby"))||void 0===a||a.classList.remove("hidden"),n.header=new r.Header,document.querySelector("header").innerHTML=n.header.element.innerHTML}))})),null===(t=document.getElementById("resign_black"))||void 0===t||t.addEventListener("click",(function(){var e,t=new l.EndgamePopUp("White Won");document.body.appendChild(t.element),null===(e=t.element.querySelector(".to-lobby"))||void 0===e||e.addEventListener("click",(function(){var e,i,o,a;t.removePopUp(),n.header=new r.Header,null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(i=document.querySelector(".player_column"))||void 0===i||i.remove(),null===(o=document.querySelector(".chessboard"))||void 0===o||o.remove(),null===(a=document.querySelector(".lobby"))||void 0===a||a.classList.remove("hidden"),document.querySelector("header").innerHTML=n.header.element.innerHTML}))}))},t.prototype.handleDraw=function(){var e=this,t=document.getElementById("draw_black"),n=document.getElementById("draw_white");null==t||t.addEventListener("click",(function(){t.classList.add("draw_offered"),n.classList.add("draw_accept"),t.disabled=!0,setTimeout((function(){t.classList.remove("draw_offered"),n.classList.remove("draw_accept"),t.disabled=!1,n.onclick=null}),1e4),n.onclick=function(){return e.acceptDraw()}})),null==n||n.addEventListener("click",(function(){n.classList.add("draw_offered"),t.classList.add("draw_accept"),n.disabled=!0,setTimeout((function(){n.classList.remove("draw_offered"),t.classList.remove("draw_accept"),t.onclick=null,n.disabled=!1}),1e4),t.onclick=function(){return e.acceptDraw()}}))},t.prototype.acceptDraw=function(){var e,t=this,n=new l.EndgamePopUp("Draw");document.body.appendChild(n.element),null===(e=n.element.querySelector(".to-lobby"))||void 0===e||e.addEventListener("click",(function(){var e,i,o,a;n.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(i=document.querySelector(".player_column"))||void 0===i||i.remove(),null===(o=document.querySelector(".chessboard"))||void 0===o||o.remove(),null===(a=document.querySelector(".lobby"))||void 0===a||a.classList.remove("hidden"),t.header=new r.Header,document.querySelector("header").innerHTML=t.header.element.innerHTML}))},t.prototype.handleName=function(){var e,t,n=this;this.lobby.renderLobby(),document.querySelectorAll(".player_name__button").forEach((function(e){e.addEventListener("click",(function(){n.handleName()}))})),null===(e=document.getElementById("friend"))||void 0===e||e.addEventListener("click",(function(){n.startGame()})),null===(t=document.getElementById("online"))||void 0===t||t.addEventListener("click",(function(){n.startOnlineGame()}))},t.prototype.mateToLobby=function(){var e=this;document.addEventListener("mouseup",(function(){setTimeout((function(){var t,n,i,o;if(!0===(null===(t=e.game)||void 0===t?void 0:t.isMate)&&!0===e.game.isWhiteTurn){var a=new l.EndgamePopUp("Black Won");document.body.appendChild(a.element),null===(n=a.element.querySelector(".to-lobby"))||void 0===n||n.addEventListener("click",(function(){var t,n,i,o;a.removePopUp(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".player_column"))||void 0===n||n.remove(),null===(i=document.querySelector(".chessboard"))||void 0===i||i.remove(),null===(o=document.querySelector(".lobby"))||void 0===o||o.classList.remove("hidden"),e.header=new r.Header,document.querySelector("header").innerHTML=e.header.element.innerHTML})),e.game.isMate=!1}if(!0===(null===(i=e.game)||void 0===i?void 0:i.isMate)&&!0!==e.game.isWhiteTurn){var d=new l.EndgamePopUp("White Won");document.body.appendChild(d.element),null===(o=d.element.querySelector(".to-lobby"))||void 0===o||o.addEventListener("click",(function(){var t,n,i,o;d.removePopUp(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".player_column"))||void 0===n||n.remove(),null===(i=document.querySelector(".chessboard"))||void 0===i||i.remove(),null===(o=document.querySelector(".lobby"))||void 0===o||o.classList.remove("hidden"),e.header=new r.Header,document.querySelector("header").innerHTML=e.header.element.innerHTML})),e.game.isMate=!1}}),1e3)}))},t.prototype.staleMateToLobby=function(){var e=this;document.addEventListener("mouseup",(function(){setTimeout((function(){var t,n;if(!0===(null===(t=e.game)||void 0===t?void 0:t.isStaleMate)){var i=new l.EndgamePopUp("Draw");document.body.appendChild(i.element),null===(n=i.element.querySelector(".to-lobby"))||void 0===n||n.addEventListener("click",(function(){var t,n,o,a;i.removePopUp(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".player_column"))||void 0===n||n.remove(),null===(o=document.querySelector(".chessboard"))||void 0===o||o.remove(),null===(a=document.querySelector(".lobby"))||void 0===a||a.classList.remove("hidden"),e.header=new r.Header,document.querySelector("header").innerHTML=e.header.element.innerHTML})),e.game.isStaleMate=!1}}),1e3)}))},t}(a.BaseComponent);t.App=v},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0;t.BaseComponent=function(e,t){var n;void 0===e&&(e="div"),void 0===t&&(t=[]),this.element=document.createElement(e),(n=this.element.classList).add.apply(n,t)}},610:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Bishop=void 0;var a=n(492),l=n(940),d=function(e){function t(t,n){var i,o=e.call(this,"bishop",t)||this;return o.name="bishop","white"===o.pieceColor&&o.element.classList.add("bishop_white"),"black"===o.pieceColor&&o.element.classList.add("bishop_black"),o.currentSquare=document.getElementById(n),null===(i=o.currentSquare)||void 0===i||i.appendChild(o.element),o.currentSquare&&(o.currentSquare.dataset.piece=o.pieceColor),o}return o(t,e),t.prototype.validateMove=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f=this.element.parentElement,k=null==f?void 0:f.dataset.x,L=null==f?void 0:f.dataset.y;if(k&&L){for(var E=+k-1,b=+L+1;E>0;E--,b++){var g=l.xToLetter(""+E);if((null===(e=document.getElementById(""+g+b))||void 0===e?void 0:e.dataset.piece)===this.pieceColor)break;if(null===(t=document.getElementById(""+g+b))||void 0===t||t.classList.add("valid"),(null===(n=document.getElementById(""+g+b))||void 0===n?void 0:n.dataset.piece)!==this.pieceColor&&""!==(null===(i=document.getElementById(""+g+b))||void 0===i?void 0:i.dataset.piece))break}for(E=+k+1,b=+L-1;E<9&&(g=l.xToLetter(""+E),(null===(o=document.getElementById(""+g+b))||void 0===o?void 0:o.dataset.piece)!==this.pieceColor)&&(null===(a=document.getElementById(""+g+b))||void 0===a||a.classList.add("valid"),(null===(d=document.getElementById(""+g+b))||void 0===d?void 0:d.dataset.piece)===this.pieceColor||""===(null===(r=document.getElementById(""+g+b))||void 0===r?void 0:r.dataset.piece));E++,b--);}if(L&&k){for(E=+k+1,b=+L+1;E<9&&(g=l.xToLetter(""+E),(null===(c=document.getElementById(""+g+b))||void 0===c?void 0:c.dataset.piece)!==this.pieceColor)&&(null===(s=document.getElementById(""+g+b))||void 0===s||s.classList.add("valid"),(null===(u=document.getElementById(""+g+b))||void 0===u?void 0:u.dataset.piece)===this.pieceColor||""===(null===(v=document.getElementById(""+g+b))||void 0===v?void 0:v.dataset.piece));E++,b++);for(E=+k-1,b=+L-1;E<9&&(g=l.xToLetter(""+E),(null===(m=document.getElementById(""+g+b))||void 0===m?void 0:m.dataset.piece)!==this.pieceColor)&&(null===(h=document.getElementById(""+g+b))||void 0===h||h.classList.add("valid"),(null===(p=document.getElementById(""+g+b))||void 0===p?void 0:p.dataset.piece)===this.pieceColor||""===(null===(y=document.getElementById(""+g+b))||void 0===y?void 0:y.dataset.piece));E--,b--);}},t.prototype.checkLegalMoves=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f;f="white"===this.pieceColor?"black":"white";var k=this.element.parentElement,L=null==k?void 0:k.dataset.x,E=null==k?void 0:k.dataset.y;if(L&&E){for(var b=+L-1,g=+E+1;b>0;b--,g++){var w=l.xToLetter(""+b);if(null===(e=document.getElementById(""+w+g))||void 0===e||e.classList.add("attacked"),""!==(null===(t=document.getElementById(""+w+g))||void 0===t?void 0:t.dataset.piece)&&!(null===(i=null===(n=document.getElementById(""+w+g))||void 0===n?void 0:n.firstElementChild)||void 0===i?void 0:i.classList.contains("king_"+f)))break}for(b=+L+1,g=+E-1;b<9&&(w=l.xToLetter(""+b),null===(o=document.getElementById(""+w+g))||void 0===o||o.classList.add("attacked"),""===(null===(a=document.getElementById(""+w+g))||void 0===a?void 0:a.dataset.piece)||(null===(r=null===(d=document.getElementById(""+w+g))||void 0===d?void 0:d.firstElementChild)||void 0===r?void 0:r.classList.contains("king_"+f)));b++,g--);}if(E&&L){for(b=+L+1,g=+E+1;b<9&&(w=l.xToLetter(""+b),null===(c=document.getElementById(""+w+g))||void 0===c||c.classList.add("attacked"),""===(null===(s=document.getElementById(""+w+g))||void 0===s?void 0:s.dataset.piece)||(null===(v=null===(u=document.getElementById(""+w+g))||void 0===u?void 0:u.firstElementChild)||void 0===v?void 0:v.classList.contains("king_"+f)));b++,g++);for(b=+L-1,g=+E-1;b<9&&(w=l.xToLetter(""+b),null===(m=document.getElementById(""+w+g))||void 0===m||m.classList.add("attacked"),""===(null===(h=document.getElementById(""+w+g))||void 0===h?void 0:h.dataset.piece)||(null===(y=null===(p=document.getElementById(""+w+g))||void 0===p?void 0:p.firstElementChild)||void 0===y?void 0:y.classList.contains("king_"+f)));b--,g--);}},t}(a.Piece);t.Bishop=d},492:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Piece=void 0;var a=n(583);n(152);var l=function(e){function t(t,n){var i=e.call(this,"div",["chess-piece","chess-piece_"+n,t])||this;return i.pieceColor=n,i.startPosition=null,i.isAbleToMove=!1,i}return o(t,e),t.prototype.handleMove=function(e){var t=this,n=this.element;this.startPosition=n.parentElement;var i,o=e.clientX-n.getBoundingClientRect().left,a=e.clientY-n.getBoundingClientRect().top;function l(e,t){n.style.left=e-o+"px",n.style.top=t-a+"px"}function d(e){var o;l(e.pageX,e.pageY),n.hidden=!0;var a=document.elementFromPoint(e.clientX,e.clientY);if(n.hidden=!1,!a)return n.style.position="",n.style.zIndex="",n.style.left="",n.style.top="",void(null===(o=t.startPosition)||void 0===o||o.appendChild(n));var d=a.closest(".valid");i!==d&&(i&&i.classList.remove("highlight"),(i=d)&&i.classList.add("highlight"))}n.style.position="absolute",n.style.zIndex="1000",document.body.append(n),l(e.pageX,e.pageY),document.addEventListener("mousemove",d),n.addEventListener("mouseup",(function(){var e;i?(i.classList.contains("valid")&&(n.style.position="",n.style.zIndex="",n.style.left="",n.style.top="",i.innerHTML="",i.appendChild(n),i.classList.remove("highlight")),document.removeEventListener("mousemove",d),n.onmouseup=null):t.startPosition!==document.body&&(n.style.position="",n.style.zIndex="",n.style.left="",n.style.top="",null===(e=t.startPosition)||void 0===e||e.appendChild(n))}),{once:!0}),document.ondragstart=function(){return!1}},t}(a.BaseComponent);t.Piece=l},269:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ChessBoard=void 0;var a=n(583),l=n(940);n(491);var d=function(e){function t(){var t=e.call(this,"div",["chessboard"])||this;return t.element.innerHTML=l.chessBoardHTML,t}return o(t,e),t}(a.BaseComponent);t.ChessBoard=d},940:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.xToLetter=t.chessBoardHTML=void 0,t.chessBoardHTML='\n<div class="rank">\n        <div class="rank_number">1</div>\n        <div class="rank_number">2</div>\n        <div class="rank_number">3</div>\n        <div class="rank_number">4</div>\n        <div class="rank_number">5</div>\n        <div class="rank_number">6</div>\n        <div class="rank_number">7</div>\n        <div class="rank_number">8</div>\n      </div>\n      <div class="row">\n        <div class="square white" id="a8" data-x="1" data-y="8" data-piece=""></div>\n        <div class="square black" id="b8" data-x="2" data-y="8" data-piece=""></div>\n        <div class="square white" id="c8" data-x="3" data-y="8" data-piece=""></div>\n        <div class="square black" id="d8" data-x="4" data-y="8" data-piece=""></div>\n        <div class="square white" id="e8" data-x="5" data-y="8" data-piece=""></div>\n        <div class="square black" id="f8" data-x="6" data-y="8" data-piece=""></div>\n        <div class="square white" id="g8" data-x="7" data-y="8" data-piece=""></div>\n        <div class="square black" id="h8" data-x="8" data-y="8" data-piece=""></div>\n      </div>\n      <div class="row">\n        <div class="square black" id="a7" data-x="1" data-y="7" data-piece=""></div>\n        <div class="square white" id="b7" data-x="2" data-y="7" data-piece=""></div>\n        <div class="square black" id="c7" data-x="3" data-y="7" data-piece=""></div>\n        <div class="square white" id="d7" data-x="4" data-y="7" data-piece=""></div>\n        <div class="square black" id="e7" data-x="5" data-y="7" data-piece=""></div>\n        <div class="square white" id="f7" data-x="6" data-y="7" data-piece=""></div>\n        <div class="square black" id="g7" data-x="7" data-y="7" data-piece=""></div>\n        <div class="square white" id="h7" data-x="8" data-y="7" data-piece=""></div>\n      </div>\n      <div class="row">\n        <div class="square white" id="a6" data-x="1" data-y="6" data-piece=""></div>\n        <div class="square black" id="b6" data-x="2" data-y="6" data-piece=""></div>\n        <div class="square white" id="c6" data-x="3" data-y="6" data-piece=""></div>\n        <div class="square black" id="d6" data-x="4" data-y="6" data-piece=""></div>\n        <div class="square white" id="e6" data-x="5" data-y="6" data-piece=""></div>\n        <div class="square black" id="f6" data-x="6" data-y="6" data-piece=""></div>\n        <div class="square white" id="g6" data-x="7" data-y="6" data-piece=""></div>\n        <div class="square black" id="h6" data-x="8" data-y="6" data-piece=""></div>\n      </div>\n      <div class="row">\n        <div class="square black" id="a5" data-x="1" data-y="5" data-piece=""></div>\n        <div class="square white" id="b5" data-x="2" data-y="5" data-piece=""></div>\n        <div class="square black" id="c5" data-x="3" data-y="5" data-piece=""></div>\n        <div class="square white" id="d5" data-x="4" data-y="5" data-piece=""></div>\n        <div class="square black" id="e5" data-x="5" data-y="5" data-piece=""></div>\n        <div class="square white" id="f5" data-x="6" data-y="5" data-piece=""></div>\n        <div class="square black" id="g5" data-x="7" data-y="5" data-piece=""></div>\n        <div class="square white" id="h5" data-x="8" data-y="5" data-piece=""></div>\n      </div>\n      <div class="row">\n        <div class="square white" id="a4" data-x="1" data-y="4" data-piece=""></div>\n        <div class="square black" id="b4" data-x="2" data-y="4" data-piece=""></div>\n        <div class="square white" id="c4" data-x="3" data-y="4" data-piece=""></div>\n        <div class="square black" id="d4" data-x="4" data-y="4" data-piece=""></div>\n        <div class="square white" id="e4" data-x="5" data-y="4" data-piece=""></div>\n        <div class="square black" id="f4" data-x="6" data-y="4" data-piece=""></div>\n        <div class="square white" id="g4" data-x="7" data-y="4" data-piece=""></div>\n        <div class="square black" id="h4" data-x="8" data-y="4" data-piece=""></div>\n      </div>\n      <div class="row">\n        <div class="square black" id="a3" data-x="1" data-y="3" data-piece=""></div>\n        <div class="square white" id="b3" data-x="2" data-y="3" data-piece=""></div>\n        <div class="square black" id="c3" data-x="3" data-y="3" data-piece=""></div>\n        <div class="square white" id="d3" data-x="4" data-y="3" data-piece=""></div>\n        <div class="square black" id="e3" data-x="5" data-y="3" data-piece=""></div>\n        <div class="square white" id="f3" data-x="6" data-y="3" data-piece=""></div>\n        <div class="square black" id="g3" data-x="7" data-y="3" data-piece=""></div>\n        <div class="square white" id="h3" data-x="8" data-y="3" data-piece=""></div>\n      </div>\n      <div class="row">\n        <div class="square white" id="a2" data-x="1" data-y="2" data-piece=""></div>\n        <div class="square black" id="b2" data-x="2" data-y="2" data-piece=""></div>\n        <div class="square white" id="c2" data-x="3" data-y="2" data-piece=""></div>\n        <div class="square black" id="d2" data-x="4" data-y="2" data-piece=""></div>\n        <div class="square white" id="e2" data-x="5" data-y="2" data-piece=""></div>\n        <div class="square black" id="f2" data-x="6" data-y="2" data-piece=""></div>\n        <div class="square white" id="g2" data-x="7" data-y="2" data-piece=""></div>\n        <div class="square black" id="h2" data-x="8" data-y="2" data-piece=""></div>\n      </div>\n      <div class="row">\n        <div class="square black" id="a1" data-x="1" data-y="1" data-piece=""></div>\n        <div class="square white" id="b1" data-x="2" data-y="1" data-piece=""></div>\n        <div class="square black" id="c1" data-x="3" data-y="1" data-piece=""></div>\n        <div class="square white" id="d1" data-x="4" data-y="1" data-piece=""></div>\n        <div class="square black" id="e1" data-x="5" data-y="1" data-piece=""></div>\n        <div class="square white" id="f1" data-x="6" data-y="1" data-piece=""></div>\n        <div class="square black" id="g1" data-x="7" data-y="1" data-piece=""></div>\n        <div class="square white" id="h1" data-X="8" data-y="1" data-piece=""></div>\n      </div>\n      <div class="file">\n        <div class="file_name">a</div>\n        <div class="file_name">b</div>\n        <div class="file_name">c</div>\n        <div class="file_name">d</div>\n        <div class="file_name">e</div>\n        <div class="file_name">f</div>\n        <div class="file_name">g</div>\n        <div class="file_name">h</div>\n      </div>\n',t.xToLetter=function(e){return"1"===e?"a":"2"===e?"b":"3"===e?"c":"4"===e?"d":"5"===e?"e":"6"===e?"f":"7"===e?"g":"8"===e?"h":"error"}},274:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.EndgamePopUp=void 0;var a=n(765);n(262);var l=function(e){function t(t){var n,i=e.call(this)||this;return null===(n=i.element.firstElementChild)||void 0===n||n.classList.add("endgamePopUp"),i.renderPopUp(t),i}return o(t,e),t.prototype.renderPopUp=function(e){this.element.firstElementChild.innerHTML="\n        <span class='game_result'>"+e+"</span>\n        <button class='to-lobby'>To Lobby</button>\n        "},t}(a.PopUp);t.EndgamePopUp=l},229:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var i=n(610),o=n(269),a=n(940),l=n(70),d=n(913),r=n(652),c=n(559),s=n(198),u=n(146),v=n(613),m=n(981),h=function(){function e(e,t){var n,s,h;this.player1=new c.Player(e,"white"),null===(n=document.querySelector("main"))||void 0===n||n.appendChild(this.player1.element),this.chessBoard=new o.ChessBoard,null===(s=document.querySelector("main"))||void 0===s||s.appendChild(this.chessBoard.element),this.player2=new c.Player(t,"black"),null===(h=document.querySelector("main"))||void 0===h||h.appendChild(this.player2.element),this.whitePieces=[],this.blackPieces=[],this.whitePieces[0]=new v.Rook("white","h1"),this.blackPieces[0]=new v.Rook("black","h8"),this.whitePieces[1]=new v.Rook("white","a1"),this.blackPieces[1]=new v.Rook("black","a8"),this.blackPieces[2]=new i.Bishop("black","c8"),this.whitePieces[2]=new i.Bishop("white","c1"),this.blackPieces[3]=new i.Bishop("black","f8"),this.whitePieces[3]=new i.Bishop("white","f1"),this.whitePieces[4]=new u.Queen("white","d1"),this.blackPieces[4]=new u.Queen("black","d8"),this.whitePieces[5]=new d.Knight("white","b1"),this.blackPieces[5]=new d.Knight("black","b8"),this.whitePieces[6]=new d.Knight("white","g1"),this.blackPieces[6]=new d.Knight("black","g8");for(var p=7,y=1;p<15;p++,y++){var f=a.xToLetter(""+y);this.whitePieces[p]=new r.Pawn("white",f+"2"),this.blackPieces[p]=new r.Pawn("black",f+"7")}this.whitePieces[15]=new l.King("white","e1"),this.blackPieces[15]=new l.King("black","e8"),this.timer=new m.Timer(document.querySelector(".header_wrapper")),this.timer.startTimer(),this.lastMovedPiece=null,this.isEnPassant=!1,this.isWhiteTurn=!0,this.isCheck=!1,this.isMate=!1,this.isStaleMate=!1,this.whiteKSideCastlingEnabled=!0,this.whiteQSideCastlingEnabled=!0,this.blackKSideCastlingEnabled=!0,this.blackQSideCastlingEnabled=!0,this.handleTurn()}return e.prototype.handleTurn=function(){var e,t,n,i;!0===this.isWhiteTurn&&(null===(e=this.player1.element.querySelector(".player_column__avatar"))||void 0===e||e.classList.add("player_turn"),null===(t=this.player2.element.querySelector(".player_column__avatar"))||void 0===t||t.classList.remove("player_turn"),this.validateWhiteTurn()),!0!==this.isWhiteTurn&&(null===(n=this.player2.element.querySelector(".player_column__avatar"))||void 0===n||n.classList.add("player_turn"),null===(i=this.player1.element.querySelector(".player_column__avatar"))||void 0===i||i.classList.remove("player_turn"),this.validateBlackTurn())},e.prototype.validateWhiteTurn=function(){var e=this;!0===this.isCheck?(this.handleMate(),!1===this.isMate?this.handleCheck():this.timer.stopTimer()):(this.blackPieces.forEach((function(e){e.element.onmousedown=null,e.element.onmouseup=null})),this.handleStaleMate(),document.querySelectorAll(".valid").forEach((function(e){return e.classList.remove("valid")})),this.whitePieces.forEach((function(t){var n=t.currentSquare;t.element.onmousedown=function(){e.handleMouseDown(t,event)},t.element.onmouseup=function(){e.handleMouseUp(t,n)}})))},e.prototype.validateBlackTurn=function(){var e=this;!0===this.isCheck?(this.handleMate(),this.handleCheck(),!1===this.isMate?this.handleCheck():this.timer.stopTimer()):(this.whitePieces.forEach((function(e){e.element.onmousedown=null,e.element.onmouseup=null})),this.handleStaleMate(),document.querySelectorAll(".valid").forEach((function(e){return e.classList.remove("valid")})),this.blackPieces.forEach((function(t){var n=t.currentSquare;t.element.onmousedown=function(){e.handleMouseDown(t,event)},t.element.onmouseup=function(){e.handleMouseUp(t,n)}})))},e.prototype.handleMouseDown=function(e,t){var n=this;return document.querySelectorAll(".valid").forEach((function(e){return e.classList.remove("valid")})),e.element.classList.contains("king_white")?(this.blackPieces.forEach((function(e){return e.checkLegalMoves()})),e.validateMove(),!0===this.whiteKSideCastlingEnabled&&this.handleKingSideCastling(),!0===this.whiteQSideCastlingEnabled&&this.handleQueenSideCastling(),void e.handleMove(t)):e.element.classList.contains("king_black")?(this.whitePieces.forEach((function(e){return e.checkLegalMoves()})),e.validateMove(),!0===this.blackKSideCastlingEnabled&&this.handleKingSideCastling(),!0===this.blackQSideCastlingEnabled&&this.handleQueenSideCastling(),void e.handleMove(t)):(e.validateMove(),e.element.classList.contains("pawn_white")&&this.handleEnPassant(e),e.element.classList.contains("pawn_black")&&this.handleEnPassant(e),document.querySelectorAll(".valid").forEach((function(t){var i,o;if(!0===n.isWhiteTurn){document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")}));var a=void 0;""!==t.dataset.piece&&"black"!==t.dataset.piece||(a=t.dataset.piece),e.element.parentElement&&(t.dataset.piece="white",e.element.parentElement.dataset.piece="",n.blackPieces.forEach((function(e){e.element.parentElement!==t&&e.checkLegalMoves()})),t.dataset.piece=a,e.element.parentElement.dataset.piece="white"),(null===(i=n.whitePieces[15].element.parentElement)||void 0===i?void 0:i.classList.contains("attacked"))&&t.classList.remove("valid")}else document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),a=void 0,""!==t.dataset.piece&&"white"!==t.dataset.piece||(a=t.dataset.piece),e.element.parentElement&&(t.dataset.piece="black",e.element.parentElement.dataset.piece="",n.whitePieces.forEach((function(e){e.element.parentElement!==t&&e.checkLegalMoves()})),t.dataset.piece=a,e.element.parentElement.dataset.piece="black"),(null===(o=n.blackPieces[15].element.parentElement)||void 0===o?void 0:o.classList.contains("attacked"))&&t.classList.remove("valid")})),void e.handleMove(t))},e.prototype.handleMouseUp=function(e,t){var n=this;setTimeout((function(){var i,o,l,d,r,c,s,u,m,h,p,y;if(document.querySelectorAll(".valid").forEach((function(e){e.classList.remove("valid")})),e.currentSquare&&(e.currentSquare.dataset.piece=""),e.currentSquare=e.element.parentElement,e.currentSquare&&(e.currentSquare.dataset.piece=e.pieceColor),e.currentSquare!==t){if(!0===n.isWhiteTurn){if(e.element.classList.contains("king_white")&&(n.whiteQSideCastlingEnabled||n.whiteKSideCastlingEnabled)&&(e.currentSquare===document.querySelector("#g1")&&(null===(o=null===(i=document.querySelector("#h1"))||void 0===i?void 0:i.firstElementChild)||void 0===o||o.remove(),document.querySelector("#h1").dataset.piece="",n.whitePieces[0]=new v.Rook("white","f1")),e.currentSquare===document.querySelector("#c1")&&(null===(d=null===(l=document.querySelector("#a1"))||void 0===l?void 0:l.firstElementChild)||void 0===d||d.remove(),document.querySelector("#a1").dataset.piece="",n.whitePieces[1]=new v.Rook("white","d1")),n.whiteQSideCastlingEnabled=!1,n.whiteKSideCastlingEnabled=!1),e.element.classList.contains("rook_white")&&("h1"===(null==t?void 0:t.id)&&(n.whiteKSideCastlingEnabled=!1),"a1"===(null==t?void 0:t.id)&&(n.whiteQSideCastlingEnabled=!1)),!0===n.isEnPassant){var f=null===(r=e.currentSquare)||void 0===r?void 0:r.dataset.x,k=null===(c=e.currentSquare)||void 0===c?void 0:c.dataset.y,L=void 0;f&&k&&(L=document.querySelector("#"+a.xToLetter(f)+(+k-1))),L&&(L.innerHTML="",L.dataset.piece=""),n.isEnPassant=!1}return n.renderMove(e,t),n.lastMovedPiece=e,n.handlePromotion(e),n.createCheck(),n.isWhiteTurn=!1,void n.handleTurn()}if(!1===n.isWhiteTurn)return e.element.classList.contains("king_black")&&(n.blackKSideCastlingEnabled||n.blackQSideCastlingEnabled)&&(e.currentSquare===document.querySelector("#g8")&&(null===(u=null===(s=document.querySelector("#h8"))||void 0===s?void 0:s.firstElementChild)||void 0===u||u.remove(),document.querySelector("#h8").dataset.piece="",n.blackPieces[0]=new v.Rook("black","f8")),e.currentSquare===document.querySelector("#c8")&&(null===(h=null===(m=document.querySelector("#a8"))||void 0===m?void 0:m.firstElementChild)||void 0===h||h.remove(),document.querySelector("#a8").dataset.piece="",n.blackPieces[1]=new v.Rook("black","d8")),n.blackQSideCastlingEnabled=!1,n.blackKSideCastlingEnabled=!1),e.element.classList.contains("rook_black")&&("h8"===(null==t?void 0:t.id)&&(n.blackKSideCastlingEnabled=!1),"a8"===(null==t?void 0:t.id)&&(n.blackQSideCastlingEnabled=!1)),!0===n.isEnPassant&&(f=null===(p=e.currentSquare)||void 0===p?void 0:p.dataset.x,k=null===(y=e.currentSquare)||void 0===y?void 0:y.dataset.y,L=void 0,f&&k&&(L=document.querySelector("#"+a.xToLetter(f)+(+k+1))),L&&(L.innerHTML="",L.dataset.piece=""),n.isEnPassant=!1),n.renderMove(e,t),n.lastMovedPiece=e,n.handlePromotion(e),n.createCheck(),n.isWhiteTurn=!0,void n.handleTurn()}n.handleTurn()}),1)},e.prototype.createCheck=function(){var e,t,n,i,o,a;if(!0!==this.isWhiteTurn)for(var l=0,d=this.blackPieces;l<d.length;l++){var r=d[l];document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),r.checkLegalMoves(),(null===(e=this.whitePieces[15].element.parentElement)||void 0===e?void 0:e.classList.contains("attacked"))&&(null===(t=this.whitePieces[15].element.parentElement)||void 0===t||t.classList.add("checked"),null===(n=r.element.parentElement)||void 0===n||n.classList.add("checked"),this.isCheck=!0)}if(!0===this.isWhiteTurn)for(var c=0,s=this.whitePieces;c<s.length;c++){var u=s[c];document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),u.checkLegalMoves(),(null===(i=this.blackPieces[15].element.parentElement)||void 0===i?void 0:i.classList.contains("attacked"))&&(null===(o=this.blackPieces[15].element.parentElement)||void 0===o||o.classList.add("checked"),null===(a=u.element.parentElement)||void 0===a||a.classList.add("checked"),this.isCheck=!0)}},e.prototype.handleCheck=function(){var e=this;document.querySelectorAll(".valid").forEach((function(e){return e.classList.remove("valid")})),!0===this.isWhiteTurn?(this.blackPieces.forEach((function(e){e.element.onmousedown=null,e.element.onmouseup=null})),this.whitePieces.forEach((function(t){var n=t.currentSquare;t.element.onmousedown=function(){e.handleCheckMouseDown(t,event)},t.element.onmouseup=function(){e.handleCheckMouseUp(t,n)}}))):!1===this.isWhiteTurn&&(this.whitePieces.forEach((function(e){e.element.onmousedown=null,e.element.onmouseup=null})),this.blackPieces.forEach((function(t){var n=t.currentSquare;t.element.onmousedown=function(){e.handleCheckMouseDown(t,event)},t.element.onmouseup=function(){e.handleCheckMouseUp(t,n)}})))},e.prototype.handleCheckMouseDown=function(e,t){var n=this;!0===this.isWhiteTurn&&this.blackPieces.forEach((function(e){e.checkLegalMoves()})),!1===this.isWhiteTurn&&this.whitePieces.forEach((function(e){e.checkLegalMoves()})),e.validateMove(),e.element.classList.contains("king_white")||e.element.classList.contains("king_black")||document.querySelectorAll(".valid").forEach((function(e){var t,i;if(!0===n.isWhiteTurn){document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")}));var o=void 0;if(""!==e.dataset.piece&&"black"!==e.dataset.piece||(o=e.dataset.piece),"black"===e.dataset.piece&&e.classList.contains("checked")&&document.querySelectorAll(".checked").length<3)return;e.dataset.piece="white",n.blackPieces.forEach((function(e){e.checkLegalMoves()})),e.dataset.piece=o,(null===(t=n.whitePieces[15].element.parentElement)||void 0===t?void 0:t.classList.contains("attacked"))&&e.classList.remove("valid")}else{if(document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),o=void 0,""!==e.dataset.piece&&"white"!==e.dataset.piece||(o=e.dataset.piece),"white"===e.dataset.piece&&e.classList.contains("checked")&&document.querySelectorAll(".checked").length<3)return;e.dataset.piece="black",n.whitePieces.forEach((function(e){e.checkLegalMoves()})),e.dataset.piece=o,(null===(i=n.blackPieces[15].element.parentElement)||void 0===i?void 0:i.classList.contains("attacked"))&&e.classList.remove("valid")}})),e.handleMove(t)},e.prototype.handleCheckMouseUp=function(e,t){var n=this;setTimeout((function(){var i,o,l,d;if(document.querySelectorAll(".square").forEach((function(t){t.classList.remove("valid"),e.currentSquare&&(e.currentSquare.dataset.piece=""),e.currentSquare=e.element.parentElement,e.currentSquare&&(e.currentSquare.dataset.piece=e.pieceColor)})),e.currentSquare!==t){if(!0===n.isWhiteTurn){if(document.querySelectorAll(".checked").forEach((function(e){return e.classList.remove("checked")})),!0===n.isEnPassant){var r=null===(i=e.currentSquare)||void 0===i?void 0:i.dataset.x,c=null===(o=e.currentSquare)||void 0===o?void 0:o.dataset.y,s=void 0;r&&c&&(s=document.querySelector("#"+a.xToLetter(r)+(+c-1))),s&&(s.innerHTML="",s.dataset.piece=""),n.isEnPassant=!1}return n.lastMovedPiece=e,n.handlePromotion(e),n.isCheck=!1,n.createCheck(),n.isWhiteTurn=!1,void n.handleTurn()}if(!1===n.isWhiteTurn)return document.querySelectorAll(".checked").forEach((function(e){return e.classList.remove("checked")})),!0===n.isEnPassant&&(r=null===(l=e.currentSquare)||void 0===l?void 0:l.dataset.x,c=null===(d=e.currentSquare)||void 0===d?void 0:d.dataset.y,s=void 0,r&&c&&(s=document.querySelector("#"+a.xToLetter(r)+(+c+1))),s&&(s.innerHTML="",s.dataset.piece=""),n.isEnPassant=!1),n.lastMovedPiece=e,n.handlePromotion(e),n.isCheck=!1,n.createCheck(),n.isWhiteTurn=!0,void n.handleTurn()}n.handleTurn()}),1)},e.prototype.handleKingSideCastling=function(){if(!0===this.isWhiteTurn){var e=document.querySelector("#f1"),t=document.querySelector("#g1");if(""===t.dataset.piece&&""===e.dataset.piece&&!0===this.whiteKSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.blackPieces.forEach((function(e){return e.checkLegalMoves()})),(null==t?void 0:t.classList.contains("attacked"))||(null==e?void 0:e.classList.contains("attacked")))return;null==t||t.classList.add("valid")}}if(!0!==this.isWhiteTurn){var n=document.querySelector("#f8"),i=document.querySelector("#g8");if(""===i.dataset.piece&&""===n.dataset.piece&&!0===this.blackKSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.whitePieces.forEach((function(e){return e.checkLegalMoves()})),(null==i?void 0:i.classList.contains("attacked"))||(null==n?void 0:n.classList.contains("attacked")))return;null==i||i.classList.add("valid")}}},e.prototype.handleQueenSideCastling=function(){if(!0===this.isWhiteTurn){var e=document.querySelector("#c1"),t=document.querySelector("#d1"),n=document.querySelector("#b1");if(""===e.dataset.piece&&""===t.dataset.piece&&""===n.dataset.piece&&!0===this.whiteQSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.blackPieces.forEach((function(e){return e.checkLegalMoves()})),(null==e?void 0:e.classList.contains("attacked"))||(null==t?void 0:t.classList.contains("attacked"))||(null==n?void 0:n.classList.contains("attacked")))return;null==e||e.classList.add("valid")}}if(!0!==this.isWhiteTurn){var i=document.querySelector("#c8"),o=document.querySelector("#d8"),a=document.querySelector("#b8");if(""===i.dataset.piece&&""===o.dataset.piece&&""===a.dataset.piece&&!0===this.blackQSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.whitePieces.forEach((function(e){return e.checkLegalMoves()})),(null==i?void 0:i.classList.contains("attacked"))||(null==o?void 0:o.classList.contains("attacked"))||(null==a?void 0:a.classList.contains("attacked")))return;null==i||i.classList.add("valid")}}},e.prototype.handleMate=function(){var e=this;!0===this.isWhiteTurn&&(this.whitePieces.forEach((function(t){t.validateMove(),document.querySelectorAll(".valid").forEach((function(t){var n,i;document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),""!==t.dataset.piece&&"black"!==t.dataset.piece||(i=t.dataset.piece),"black"===t.dataset.piece&&t.classList.contains("checked")&&document.querySelectorAll(".checked").length<3||(t.dataset.piece="white",e.blackPieces.forEach((function(e){e.checkLegalMoves()})),t.dataset.piece=i,(null===(n=e.whitePieces[15].element.parentElement)||void 0===n?void 0:n.classList.contains("attacked"))&&t.classList.remove("valid"))}))})),document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove(".attacked")})),this.blackPieces.forEach((function(e){return e.checkLegalMoves()})),this.whitePieces[15].validateMove(),0===document.querySelectorAll(".valid").length&&(this.isMate=!0)),!1===this.isWhiteTurn&&(this.blackPieces.forEach((function(t){t.validateMove(),document.querySelectorAll(".valid").forEach((function(t){var n,i;document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),""!==t.dataset.piece&&"white"!==t.dataset.piece||(i=t.dataset.piece),"white"===t.dataset.piece&&t.classList.contains("checked")&&document.querySelectorAll(".checked").length<3||(t.dataset.piece="black",e.whitePieces.forEach((function(e){e.checkLegalMoves()})),t.dataset.piece=i,(null===(n=e.blackPieces[15].element.parentElement)||void 0===n?void 0:n.classList.contains("attacked"))&&t.classList.remove("valid"))}))})),document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove(".attacked")})),this.whitePieces.forEach((function(e){return e.checkLegalMoves()})),this.blackPieces[15].validateMove(),0===document.querySelectorAll(".valid").length&&(this.isMate=!0))},e.prototype.handleStaleMate=function(){var e=this;!0===this.isWhiteTurn&&(this.whitePieces.forEach((function(t){t.element.classList.contains("king_white")||(t.validateMove(),document.querySelectorAll(".valid").forEach((function(t){var n,i;document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),""!==t.dataset.piece&&"black"!==t.dataset.piece||(i=t.dataset.piece),t.dataset.piece="white",e.blackPieces.forEach((function(e){e.checkLegalMoves()})),t.dataset.piece=i,(null===(n=e.whitePieces[15].element.parentElement)||void 0===n?void 0:n.classList.contains("attacked"))&&t.classList.remove("valid")})))})),document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove(".attacked")})),this.blackPieces.forEach((function(e){return e.checkLegalMoves()})),this.whitePieces[15].validateMove(),0===document.querySelectorAll(".valid").length&&(this.isStaleMate=!0)),!1===this.isWhiteTurn&&(this.blackPieces.forEach((function(t){t.element.classList.contains("king_black")||(t.validateMove(),document.querySelectorAll(".valid").forEach((function(t){var n,i;document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),""!==t.dataset.piece&&"white"!==t.dataset.piece||(i=t.dataset.piece),t.dataset.piece="black",e.whitePieces.forEach((function(e){e.checkLegalMoves()})),t.dataset.piece=i,(null===(n=e.blackPieces[15].element.parentElement)||void 0===n?void 0:n.classList.contains("attacked"))&&t.classList.remove("valid")})))})),document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove(".attacked")})),this.whitePieces.forEach((function(e){return e.checkLegalMoves()})),this.blackPieces[15].validateMove(),0===document.querySelectorAll(".valid").length&&(this.isStaleMate=!0))},e.prototype.handleEnPassant=function(e){var t,n,i,o,l,d,r,c,s,u,v,m,h,p,y,f,k,L;if(!0===this.isWhiteTurn){var E=null===(n=null===(t=this.lastMovedPiece)||void 0===t?void 0:t.element.parentElement)||void 0===n?void 0:n.dataset.x,b=null===(o=null===(i=this.lastMovedPiece)||void 0===i?void 0:i.element.parentElement)||void 0===o?void 0:o.dataset.y;E&&b&&(null===(l=e.element.parentElement)||void 0===l?void 0:l.dataset.x)&&"7"===(null===(r=null===(d=this.lastMovedPiece)||void 0===d?void 0:d.startPosition)||void 0===r?void 0:r.dataset.y)&&(+E==+e.element.parentElement.dataset.x-1||+E==+e.element.parentElement.dataset.x+1)&&b===e.element.parentElement.dataset.y&&"5"===b&&(null===(c=this.lastMovedPiece)||void 0===c?void 0:c.element.classList.contains("pawn_black"))&&(null===(s=document.querySelector("#"+a.xToLetter(E)+(+b+1)))||void 0===s||s.classList.add("valid"),this.isEnPassant=!0)}!1===this.isWhiteTurn&&(E=null===(v=null===(u=this.lastMovedPiece)||void 0===u?void 0:u.element.parentElement)||void 0===v?void 0:v.dataset.x,b=null===(h=null===(m=this.lastMovedPiece)||void 0===m?void 0:m.element.parentElement)||void 0===h?void 0:h.dataset.y,E&&b&&(null===(p=e.element.parentElement)||void 0===p?void 0:p.dataset.x)&&"2"===(null===(f=null===(y=this.lastMovedPiece)||void 0===y?void 0:y.startPosition)||void 0===f?void 0:f.dataset.y)&&(+E==+e.element.parentElement.dataset.x-1||+E==+e.element.parentElement.dataset.x+1)&&b===e.element.parentElement.dataset.y&&(null===(k=this.lastMovedPiece)||void 0===k?void 0:k.element.classList.contains("pawn_white"))&&(null===(L=document.querySelector("#"+a.xToLetter(E)+(+b-1)))||void 0===L||L.classList.add("valid"),this.isEnPassant=!0))},e.prototype.handlePromotion=function(e){var t,n,o,a,l=this;if(!0===this.isWhiteTurn&&"8"===(null===(t=e.currentSquare)||void 0===t?void 0:t.dataset.y)&&e.element.classList.contains("pawn_white")){e.currentSquare.innerHTML="";var r=new s.PromotionPopUp("white");document.body.appendChild(r.element),null===(n=document.querySelector(".pop-up"))||void 0===n||n.querySelectorAll("button").forEach((function(t){t.addEventListener("click",(function(t){var n=e.currentSquare;n&&(n.innerHTML="","queen"===t.target.dataset.piece?l.whitePieces.push(new u.Queen("white",n.id)):"rook"===t.target.dataset.piece?l.whitePieces.push(new v.Rook("white",n.id)):"knight"===t.target.dataset.piece?l.whitePieces.push(new d.Knight("white",n.id)):"bishop"===t.target.dataset.piece&&l.whitePieces.push(new i.Bishop("white",n.id))),l.isWhiteTurn=!0,l.createCheck(),l.isWhiteTurn=!1,l.handleMate(),r.removePopUp()}))}))}if(!1===this.isWhiteTurn&&"1"===(null===(o=e.currentSquare)||void 0===o?void 0:o.dataset.y)&&e.element.classList.contains("pawn_black")){e.currentSquare.innerHTML="";var c=new s.PromotionPopUp("black");document.body.appendChild(c.element),null===(a=document.querySelector(".pop-up"))||void 0===a||a.querySelectorAll("button").forEach((function(t){t.addEventListener("click",(function(t){var n=e.currentSquare;n&&(n.innerHTML="","queen"===t.target.dataset.piece?l.blackPieces.push(new u.Queen("black",n.id)):"rook"===t.target.dataset.piece?l.blackPieces.push(new v.Rook("black",n.id)):"knight"===t.target.dataset.piece?l.blackPieces.push(new d.Knight("black",n.id)):"bishop"===t.target.dataset.piece&&l.blackPieces.push(new i.Bishop("black",n.id))),l.isWhiteTurn=!1,l.createCheck(),l.isWhiteTurn=!0,l.handleMate(),c.removePopUp()}))}))}},e.prototype.renderMove=function(e,t){!0===this.isWhiteTurn?(e.element.classList.contains("rook")&&this.player1.createMove("R",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("queen")&&this.player1.createMove("Q",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("pawn")&&this.player1.createMove("",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("king")&&this.player1.createMove("K",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("knight")&&this.player1.createMove("N",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("bishop")&&this.player1.createMove("B",t.id,e.currentSquare.id,this.timer.element.innerText)):(e.element.classList.contains("rook")&&this.player2.createMove("R",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("queen")&&this.player2.createMove("Q",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("pawn")&&this.player2.createMove("",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("king")&&this.player2.createMove("K",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("knight")&&this.player2.createMove("N",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("bishop")&&this.player2.createMove("B",t.id,e.currentSquare.id,this.timer.element.innerText))},e}();t.Game=h},977:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var a=n(583);n(528);var l=function(e){function t(){var t=e.call(this,"header",["header"])||this;return t.renderHeader(),t}return o(t,e),t.prototype.renderHeader=function(){this.element.innerHTML='\n        <div class="header_wrapper">\n        <div class="header_logo">\n          <img src="./images/logo.svg" class="header_logo__image" />\n          <div class="header_logo__text">Chess</div>\n        </div>\n      <span class="page-name">Lobby</span>\n    </div>'},t}(a.BaseComponent);t.Header=l},70:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.King=void 0;var a=n(492),l=n(940),d=function(e){function t(t,n){var i,o=e.call(this,"king",t)||this;return o.name="king","white"===o.pieceColor&&o.element.classList.add("king_white"),"black"===o.pieceColor&&o.element.classList.add("king_black"),o.currentSquare=document.getElementById(n),null===(i=o.currentSquare)||void 0===i||i.appendChild(o.element),o.currentSquare&&(o.currentSquare.dataset.piece=o.pieceColor),o}return o(t,e),t.prototype.validateMove=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f,k,L,E,b,g,w,_,S=this.element.parentElement,q=null==S?void 0:S.dataset.x,P=null==S?void 0:S.dataset.y;q&&P&&((null===(e=document.getElementById(""+l.xToLetter(""+(+q+1))+(+P+1)))||void 0===e?void 0:e.dataset.piece)===this.pieceColor||(null===(t=document.getElementById(""+l.xToLetter(""+(+q+1))+(+P+1)))||void 0===t?void 0:t.classList.contains("attacked"))||null===(n=document.getElementById(""+l.xToLetter(""+(+q+1))+(+P+1)))||void 0===n||n.classList.add("valid"),(null===(i=document.getElementById(""+l.xToLetter(""+(+q+1))+(+P-1)))||void 0===i?void 0:i.dataset.piece)===this.pieceColor||(null===(o=document.getElementById(""+l.xToLetter(""+(+q+1))+(+P-1)))||void 0===o?void 0:o.classList.contains("attacked"))||null===(a=document.getElementById(""+l.xToLetter(""+(+q+1))+(+P-1)))||void 0===a||a.classList.add("valid"),(null===(d=document.getElementById(""+l.xToLetter(""+(+q+1))+ +P))||void 0===d?void 0:d.dataset.piece)===this.pieceColor||(null===(r=document.getElementById(""+l.xToLetter(""+(+q+1))+P))||void 0===r?void 0:r.classList.contains("attacked"))||null===(c=document.getElementById(""+l.xToLetter(""+(+q+1))+ +P))||void 0===c||c.classList.add("valid"),(null===(s=document.getElementById(""+l.xToLetter(q)+(+P+1)))||void 0===s?void 0:s.dataset.piece)===this.pieceColor||(null===(u=document.getElementById(""+l.xToLetter(q)+(+P+1)))||void 0===u?void 0:u.classList.contains("attacked"))||null===(v=document.getElementById(""+l.xToLetter(q)+(+P+1)))||void 0===v||v.classList.add("valid"),(null===(m=document.getElementById(""+l.xToLetter(q)+(+P-1)))||void 0===m?void 0:m.dataset.piece)===this.pieceColor||(null===(h=document.getElementById(""+l.xToLetter(q)+(+P-1)))||void 0===h?void 0:h.classList.contains("attacked"))||null===(p=document.getElementById(""+l.xToLetter(q)+(+P-1)))||void 0===p||p.classList.add("valid"),(null===(y=document.getElementById(""+l.xToLetter(""+(+q-1))+(+P+1)))||void 0===y?void 0:y.dataset.piece)===this.pieceColor||(null===(f=document.getElementById(""+l.xToLetter(""+(+q-1))+(+P+1)))||void 0===f?void 0:f.classList.contains("attacked"))||null===(k=document.getElementById(""+l.xToLetter(""+(+q-1))+(+P+1)))||void 0===k||k.classList.add("valid"),(null===(L=document.getElementById(""+l.xToLetter(""+(+q-1))+P))||void 0===L?void 0:L.dataset.piece)===this.pieceColor||(null===(E=document.getElementById(""+l.xToLetter(""+(+q-1))+P))||void 0===E?void 0:E.classList.contains("attacked"))||null===(b=document.getElementById(""+l.xToLetter(""+(+q-1))+P))||void 0===b||b.classList.add("valid"),(null===(g=document.getElementById(""+l.xToLetter(""+(+q-1))+(+P-1)))||void 0===g?void 0:g.dataset.piece)===this.pieceColor||(null===(w=document.getElementById(""+l.xToLetter(""+(+q-1))+(+P-1)))||void 0===w?void 0:w.classList.contains("attacked"))||null===(_=document.getElementById(""+l.xToLetter(""+(+q-1))+(+P-1)))||void 0===_||_.classList.add("valid"))},t.prototype.checkLegalMoves=function(){var e,t,n,i,o,a,d,r,c=this.element.parentElement,s=null==c?void 0:c.dataset.x,u=null==c?void 0:c.dataset.y;s&&u&&(null===(e=document.getElementById(""+l.xToLetter(""+(+s+1))+(+u+1)))||void 0===e||e.classList.add("attacked"),null===(t=document.getElementById(""+l.xToLetter(""+(+s+1))+(+u-1)))||void 0===t||t.classList.add("attacked"),null===(n=document.getElementById(""+l.xToLetter(""+(+s+1))+ +u))||void 0===n||n.classList.add("attacked"),null===(i=document.getElementById(""+l.xToLetter(s)+(+u+1)))||void 0===i||i.classList.add("attacked"),null===(o=document.getElementById(""+l.xToLetter(s)+(+u-1)))||void 0===o||o.classList.add("attacked"),null===(a=document.getElementById(""+l.xToLetter(""+(+s-1))+(+u+1)))||void 0===a||a.classList.add("attacked"),null===(d=document.getElementById(""+l.xToLetter(""+(+s-1))+u))||void 0===d||d.classList.add("attacked"),null===(r=document.getElementById(""+l.xToLetter(""+(+s-1))+(+u-1)))||void 0===r||r.classList.add("attacked"))},t}(a.Piece);t.King=d},913:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Knight=void 0;var a=n(492),l=n(940),d=function(e){function t(t,n){var i,o=e.call(this,"knight",t)||this;return o.name="knight","white"===o.pieceColor&&o.element.classList.add("knight_white"),"black"===o.pieceColor&&o.element.classList.add("knight_black"),o.currentSquare=document.getElementById(n),null===(i=o.currentSquare)||void 0===i||i.appendChild(o.element),o.currentSquare&&(o.currentSquare.dataset.piece=o.pieceColor),o}return o(t,e),t.prototype.validateMove=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f=this.element.parentElement,k=null==f?void 0:f.dataset.x,L=null==f?void 0:f.dataset.y;k&&L&&((null===(e=document.getElementById(""+l.xToLetter(""+(+k+1))+(+L+2)))||void 0===e?void 0:e.dataset.piece)!==this.pieceColor&&(null===(t=document.getElementById(""+l.xToLetter(""+(+k+1))+(+L+2)))||void 0===t||t.classList.add("valid")),(null===(n=document.getElementById(""+l.xToLetter(""+(+k+1))+(+L-2)))||void 0===n?void 0:n.dataset.piece)!==this.pieceColor&&(null===(i=document.getElementById(""+l.xToLetter(""+(+k+1))+(+L-2)))||void 0===i||i.classList.add("valid")),(null===(o=document.getElementById(""+l.xToLetter(""+(+k-1))+(+L-2)))||void 0===o?void 0:o.dataset.piece)!==this.pieceColor&&(null===(a=document.getElementById(""+l.xToLetter(""+(+k-1))+(+L-2)))||void 0===a||a.classList.add("valid")),(null===(d=document.getElementById(""+l.xToLetter(""+(+k-1))+(+L+2)))||void 0===d?void 0:d.dataset.piece)!==this.pieceColor&&(null===(r=document.getElementById(""+l.xToLetter(""+(+k-1))+(+L+2)))||void 0===r||r.classList.add("valid")),(null===(c=document.getElementById(""+l.xToLetter(""+(+k-2))+(+L-1)))||void 0===c?void 0:c.dataset.piece)!==this.pieceColor&&(null===(s=document.getElementById(""+l.xToLetter(""+(+k-2))+(+L-1)))||void 0===s||s.classList.add("valid")),(null===(u=document.getElementById(""+l.xToLetter(""+(+k-2))+(+L+1)))||void 0===u?void 0:u.dataset.piece)!==this.pieceColor&&(null===(v=document.getElementById(""+l.xToLetter(""+(+k-2))+(+L+1)))||void 0===v||v.classList.add("valid")),(null===(m=document.getElementById(""+l.xToLetter(""+(+k+2))+(+L-1)))||void 0===m?void 0:m.dataset.piece)!==this.pieceColor&&(null===(h=document.getElementById(""+l.xToLetter(""+(+k+2))+(+L-1)))||void 0===h||h.classList.add("valid")),(null===(p=document.getElementById(""+l.xToLetter(""+(+k+2))+(+L+1)))||void 0===p?void 0:p.dataset.piece)!==this.pieceColor&&(null===(y=document.getElementById(""+l.xToLetter(""+(+k+2))+(+L+1)))||void 0===y||y.classList.add("valid")))},t.prototype.checkLegalMoves=function(){var e,t,n,i,o,a,d,r,c=this.element.parentElement,s=null==c?void 0:c.dataset.x,u=null==c?void 0:c.dataset.y;s&&u&&(null===(e=document.getElementById(""+l.xToLetter(""+(+s+1))+(+u+2)))||void 0===e||e.classList.add("attacked"),null===(t=document.getElementById(""+l.xToLetter(""+(+s+1))+(+u-2)))||void 0===t||t.classList.add("attacked"),null===(n=document.getElementById(""+l.xToLetter(""+(+s-1))+(+u-2)))||void 0===n||n.classList.add("attacked"),null===(i=document.getElementById(""+l.xToLetter(""+(+s-1))+(+u+2)))||void 0===i||i.classList.add("attacked"),null===(o=document.getElementById(""+l.xToLetter(""+(+s-2))+(+u-1)))||void 0===o||o.classList.add("attacked"),null===(a=document.getElementById(""+l.xToLetter(""+(+s-2))+(+u+1)))||void 0===a||a.classList.add("attacked"),null===(d=document.getElementById(""+l.xToLetter(""+(+s+2))+(+u-1)))||void 0===d||d.classList.add("attacked"),null===(r=document.getElementById(""+l.xToLetter(""+(+s+2))+(+u+1)))||void 0===r||r.classList.add("attacked"))},t}(a.Piece);t.Knight=d},381:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Lobby=void 0;var a=n(583),l=n(400);n(778);var d=function(e){function t(){var t=e.call(this,"div",["lobby"])||this;return t.renderLobby(),t}return o(t,e),t.prototype.renderLobby=function(){var e,t,n=this,i=l.storage.player1Name[0];void 0!==l.storage.player1Name.split(" ")[1]&&""!==l.storage.player1Name.split(" ")[1]&&(i+=l.storage.player1Name.split(" ")[1][0]);var o=l.storage.player2Name[0];void 0!==l.storage.player2Name.split(" ")[1]&&""!==l.storage.player2Name.split(" ")[1]&&(o+=l.storage.player2Name.split(" ")[1][0]),void 0===i&&(i=""),void 0===o&&(o=""),this.element.innerHTML='\n      <div class="wrapper">\n        <div class="player">\n          <div class="player_avatar">'+i+"</div>\n          <div class=\"player_name\">\n          <input type='text' class=\"player_name__input\" id='player1_name' value='"+l.storage.player1Name+'\'></input>\n          <button class="player_name__button">Save</button>\n          </div>\n        </div>\n        <div class="game-buttons">\n          <button class="main_button" id=\'online\'>Play Online</button>\n          <button class="main_button" id=\'friend\'>Play With Friend</button>\n          <button class="main_button" disabled>Play With Computer</button>\n          <button class="main_button" disabled>Replays</button>\n        </div>\n        <div class="player">\n          <div class="player_avatar">'+o+"</div>\n          <div class=\"player_name\">\n          <input type='text' class=\"player_name__input\" id='player2_name' value='"+l.storage.player2Name+'\'></input>\n          <button class="player_name__button">Save</button>\n          </div>\n        </div>\n      </div>',null===(e=this.element.querySelector("#player1_name"))||void 0===e||e.addEventListener("input",(function(){l.storage.player1Name=n.element.querySelector("#player1_name").value})),null===(t=this.element.querySelector("#player2_name"))||void 0===t||t.addEventListener("input",(function(){l.storage.player2Name=n.element.querySelector("#player2_name").value}))},t}(a.BaseComponent);t.Lobby=d},467:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Move=void 0;var a=n(583);n(751);var l=function(e){function t(t,n,i,o){var a=e.call(this,"div",["move"])||this;return a.renderMove(t,n,i,o),a}return o(t,e),t.prototype.renderMove=function(e,t,n,i){this.element.innerHTML='\n            <div class="move_piece">'+e+'</div>\n            <div class="move_squares">'+t+"-"+n+'</div>\n            <div class="move_time">'+i+"</div>\n        "},t}(a.BaseComponent);t.Move=l},456:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineGame=void 0;var i=n(367),o=n(794),a=n(610),l=n(269),d=n(940),r=n(274),c=n(977),s=n(70),u=n(913),v=n(652),m=n(821),h=n(498),p=n(198),y=n(146),f=n(613),k=n(981),L=function(){function e(e){var t,n,i;this.socket=new WebSocket("wss://jxm-chess-server.herokuapp.com/:8999"),this.yourName=e,this.yourColor="",this.enemyColor="",this.yourPieces=[],this.enemyPieces=[],this.handleIncomingMove(),this.player1=new m.OnlinePlayer(e),null===(t=document.querySelector("main"))||void 0===t||t.appendChild(this.player1.element),this.chessBoard=new l.ChessBoard,null===(n=document.querySelector("main"))||void 0===n||n.appendChild(this.chessBoard.element),this.player2=new m.OnlinePlayer("",!0),null===(i=document.querySelector("main"))||void 0===i||i.appendChild(this.player2.element),this.timer=new k.Timer(document.querySelector(".header_wrapper")),this.lastMovedPiece=null,this.lastMovedEnemyPiece=null,this.isEnPassant=!1,this.isYourTurn=!0,this.isCheck=!1,this.isMate=!1,this.isStaleMate=!1,this.KSideCastlingEnabled=!0,this.QSideCastlingEnabled=!0,this.handleResign(),this.handleDrawOffer()}return e.prototype.handleDrawOffer=function(){var e=this,t=document.querySelector("#draw_button");t.onclick=function(){t.classList.add("draw_offered"),e.socket.send("draw offered"),setTimeout((function(){t.onclick=null,t.classList.remove("draw_offered")}),1e4)}},e.prototype.handleResign=function(){var e,t=this;null===(e=document.querySelector(".player_button__resign"))||void 0===e||e.addEventListener("click",(function(){var e,n=new r.EndgamePopUp("You Resigned");document.body.appendChild(n.element),t.socket.send("resigned"),t.socket.close(),null===(e=n.element.querySelector(".to-lobby"))||void 0===e||e.addEventListener("click",(function(){var e,t,i,o;n.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(i=document.querySelector(".chessboard"))||void 0===i||i.remove(),null===(o=document.querySelector(".lobby"))||void 0===o||o.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,n.removePopUp()}))}))},e.prototype.handleIncomingMove=function(){var e=this,t=this.socket;this.socket.onmessage=function(n){var o,a,l,d,s,u,v,m,p=n.data;if("connected"!==p){if("white"===p)return e.timer.startTimer(),e.initializePieces("white","black"),null===(o=document.querySelector(".pop-up"))||void 0===o||o.remove(),void e.handleTurn();if("black"===p)return e.timer.startTimer(),e.initializePieces("black","white"),null===(a=document.querySelector(".pop-up"))||void 0===a||a.remove(),void e.handleTurn();if("loading"===p){var y=new h.PregamePopUp;return document.body.appendChild(y.element),void(null===(l=y.element.querySelector(".to-lobby-online"))||void 0===l||l.addEventListener("click",(function(){var e,n,i,o;t.close(),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,y.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(n=document.querySelector(".player_column"))||void 0===n||n.remove(),null===(i=document.querySelector(".chessboard"))||void 0===i||i.remove(),null===(o=document.querySelector(".lobby"))||void 0===o||o.classList.remove("hidden")})))}var f;if("name:"===p.split(" ")[0]){""!==p.split(" ")[1]&&(f=p.split(" ")[1][0],void 0!==p.split(" ")[2]&&(f+=p.split(" ")[2][0]));var k=p.split(" ");return k.splice(0,1),k=k.join(" "),e.player2.element.querySelector(".player_column__avatar").innerText=f,void(e.player2.element.querySelector(".player_column__name").innerText=k)}if("mate"===p){var L=new r.EndgamePopUp("You Won");return document.body.appendChild(L.element),e.socket.close(),void(null===(d=L.element.querySelector(".to-lobby"))||void 0===d||d.addEventListener("click",(function(){var e,t,n,i;L.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".chessboard"))||void 0===n||n.remove(),null===(i=document.querySelector(".lobby"))||void 0===i||i.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,L.removePopUp()})))}if("stalemate"===p){var E=new r.EndgamePopUp("Draw");return document.body.appendChild(E.element),e.socket.close(),void(null===(s=E.element.querySelector(".to-lobby"))||void 0===s||s.addEventListener("click",(function(){var e,t,n,i;E.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".chessboard"))||void 0===n||n.remove(),null===(i=document.querySelector(".lobby"))||void 0===i||i.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,E.removePopUp()})))}if("resigned"===p){var b=new r.EndgamePopUp("Opponent Resigned");return document.body.appendChild(b.element),t.close(),void(null===(u=b.element.querySelector(".to-lobby"))||void 0===u||u.addEventListener("click",(function(){var e,t,n,i;b.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".chessboard"))||void 0===n||n.remove(),null===(i=document.querySelector(".lobby"))||void 0===i||i.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,b.removePopUp()})))}if("draw offered"===p){var g=document.querySelector("#draw_button");return g.classList.add("draw_accept"),g.onclick=function(){var e,n=new r.EndgamePopUp("Draw");document.body.appendChild(n.element),t.send("draw agreed"),t.close(),null===(e=n.element.querySelector(".to-lobby"))||void 0===e||e.addEventListener("click",(function(){var e,t,i,o;n.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(i=document.querySelector(".chessboard"))||void 0===i||i.remove(),null===(o=document.querySelector(".lobby"))||void 0===o||o.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,n.removePopUp()}))},void setTimeout((function(){g.onclick=function(){g.classList.add("draw_offered"),e.socket.send("draw offered"),setTimeout((function(){g.onclick=null,g.classList.remove("draw_offered")}),1e4)},g.classList.remove("draw_accept")}),1e4)}if("draw agreed"===p){var w=new r.EndgamePopUp("Draw");return document.body.appendChild(w.element),t.close(),void(null===(v=w.element.querySelector(".to-lobby"))||void 0===v||v.addEventListener("click",(function(){var e,t,n,i;w.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".chessboard"))||void 0===n||n.remove(),null===(i=document.querySelector(".lobby"))||void 0===i||i.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,w.removePopUp()})))}if("disconnected"===p){document.createElement("div").textContent=p;var _=new r.EndgamePopUp("Opponent left");return document.body.appendChild(_.element),void(null===(m=_.element.querySelector(".to-lobby"))||void 0===m||m.addEventListener("click",(function(){var e,t,n,i;_.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(n=document.querySelector(".chessboard"))||void 0===n||n.remove(),null===(i=document.querySelector(".lobby"))||void 0===i||i.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,_.removePopUp()})))}var S=JSON.parse(p),q=document.querySelector("#"+S.initialSquare),P=q.firstElementChild;q.innerHTML="",q.dataset.piece="";var T=document.querySelector("#"+S.finalSquare);T.innerHTML="",e.isYourTurn=!0,e.lastMovedEnemyPiece=new i.EnemyPiece(P,S.initialSquare),e.handleEnemyMove(S.initialPiece,S.finalPiece,S.initialSquare,T,P)}else e.socket.send("name: "+e.yourName)}},e.prototype.handleEnemyMove=function(e,t,n,i,o){var l,r,c,s,v,m,h,p,k,L,E,b,g,w;if(e===t)i.appendChild(o),i.dataset.piece=this.enemyColor,"white"===this.yourColor&&(null===(l=this.lastMovedPiece)||void 0===l?void 0:l.element.classList.contains("pawn"))&&(null===(r=this.lastMovedEnemyPiece)||void 0===r?void 0:r.enemyPiece.classList.contains("pawn"))&&"2"===(null===(c=this.lastMovedPiece.startPosition)||void 0===c?void 0:c.dataset.y)&&"4"===(null===(s=this.lastMovedPiece.currentSquare)||void 0===s?void 0:s.dataset.y)&&d.xToLetter(null===(m=null===(v=this.lastMovedPiece)||void 0===v?void 0:v.startPosition)||void 0===m?void 0:m.dataset.x)===i.id.split("")[0]&&"3"===i.id.split("")[1]&&(this.lastMovedPiece.element.parentElement.dataset.piece="",null===(h=this.lastMovedPiece)||void 0===h||h.element.remove()),"black"===this.yourColor&&(null===(p=this.lastMovedPiece)||void 0===p?void 0:p.element.classList.contains("pawn"))&&(null===(k=this.lastMovedEnemyPiece)||void 0===k?void 0:k.enemyPiece.classList.contains("pawn"))&&"7"===(null===(L=this.lastMovedPiece.startPosition)||void 0===L?void 0:L.dataset.y)&&"5"===(null===(E=this.lastMovedPiece.currentSquare)||void 0===E?void 0:E.dataset.y)&&d.xToLetter(null===(g=null===(b=this.lastMovedPiece)||void 0===b?void 0:b.startPosition)||void 0===g?void 0:g.dataset.x)===i.id.split("")[0]&&"6"===i.id.split("")[1]&&(this.lastMovedPiece.element.parentElement.dataset.piece="",null===(w=this.lastMovedPiece)||void 0===w||w.element.remove());else if("pawn"===e){if("queen"===t){var _=new y.Queen(this.enemyColor,i.id);this.enemyPieces.push(_)}"rook"===t&&this.enemyPieces.push(new f.Rook(this.enemyColor,i.id)),"knight"===t&&this.enemyPieces.push(new u.Knight(this.enemyColor,i.id)),"bishop"===t&&this.enemyPieces.push(new a.Bishop(this.enemyColor,i.id))}document.querySelectorAll(".checked").forEach((function(e){e.classList.remove("checked")})),this.handleEnemyCheck(),this.handleEnemyCastling(t,n,i.id),this.renderEnemyMove(e,n,i.id),this.handleTurn()},e.prototype.handleEnemyCastling=function(e,t,n){var i,o,a,l,d,r,c,s;"king"===e&&"e1"===t&&"g1"===n&&(null===(o=null===(i=document.querySelector("#h1"))||void 0===i?void 0:i.firstElementChild)||void 0===o||o.remove(),document.querySelector("#h1").dataset.piece="",this.enemyPieces[0]=new f.Rook(this.enemyColor,"f1")),"king"===e&&"e1"===t&&"c1"===n&&(null===(l=null===(a=document.querySelector("#a1"))||void 0===a?void 0:a.firstElementChild)||void 0===l||l.remove(),document.querySelector("#a1").dataset.piece="",this.enemyPieces[0]=new f.Rook(this.enemyColor,"d1")),"king"===e&&"e8"===t&&"g8"===n&&(null===(r=null===(d=document.querySelector("#h8"))||void 0===d?void 0:d.firstElementChild)||void 0===r||r.remove(),document.querySelector("#h8").dataset.piece="",this.enemyPieces[0]=new f.Rook(this.enemyColor,"f8")),"king"===e&&"e8"===t&&"c8"===n&&(null===(s=null===(c=document.querySelector("#a8"))||void 0===c?void 0:c.firstElementChild)||void 0===s||s.remove(),document.querySelector("#a8").dataset.piece="",this.enemyPieces[0]=new f.Rook(this.enemyColor,"d8"))},e.prototype.handleEnemyCheck=function(){var e=this;this.enemyPieces.forEach((function(t){var n,i;t.checkLegalMoves(),(null===(n=e.yourPieces[15].element.parentElement)||void 0===n?void 0:n.classList.contains("attacked"))&&(null===(i=t.element.parentElement)||void 0===i||i.classList.add("checked"),e.yourPieces[15].element.parentElement.classList.add("checked"),document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),e.isCheck=!0)}))},e.prototype.initializePieces=function(e,t){if(this.yourColor=e,this.enemyColor=t,"white"===e){this.yourPieces[0]=new f.Rook("white","h1"),this.enemyPieces[0]=new f.Rook("black","h8"),this.yourPieces[1]=new f.Rook("white","a1"),this.enemyPieces[1]=new f.Rook("black","a8"),this.enemyPieces[2]=new a.Bishop("black","c8"),this.yourPieces[2]=new a.Bishop("white","c1"),this.enemyPieces[3]=new a.Bishop("black","f8"),this.yourPieces[3]=new a.Bishop("white","f1"),this.yourPieces[4]=new y.Queen("white","d1"),this.enemyPieces[4]=new y.Queen("black","d8"),this.yourPieces[5]=new u.Knight("white","b1"),this.enemyPieces[5]=new u.Knight("black","b8"),this.yourPieces[6]=new u.Knight("white","g1"),this.enemyPieces[6]=new u.Knight("black","g8");for(var n=7,i=1;n<15;n++,i++){var o=d.xToLetter(""+i);this.yourPieces[n]=new v.Pawn("white",o+"2"),this.enemyPieces[n]=new v.Pawn("black",o+"7")}this.yourPieces[15]=new s.King("white","e1"),this.enemyPieces[15]=new s.King("black","e8")}if("black"===e){for(this.chessBoard.element.classList.add("turned"),this.isYourTurn=!1,this.enemyPieces[0]=new f.Rook("white","h1"),this.yourPieces[0]=new f.Rook("black","h8"),this.enemyPieces[1]=new f.Rook("white","a1"),this.yourPieces[1]=new f.Rook("black","a8"),this.yourPieces[2]=new a.Bishop("black","c8"),this.enemyPieces[2]=new a.Bishop("white","c1"),this.yourPieces[3]=new a.Bishop("black","f8"),this.enemyPieces[3]=new a.Bishop("white","f1"),this.enemyPieces[4]=new y.Queen("white","d1"),this.yourPieces[4]=new y.Queen("black","d8"),this.enemyPieces[5]=new u.Knight("white","b1"),this.yourPieces[5]=new u.Knight("black","b8"),this.enemyPieces[6]=new u.Knight("white","g1"),this.yourPieces[6]=new u.Knight("black","g8"),n=7,i=1;n<15;n++,i++)o=d.xToLetter(""+i),this.enemyPieces[n]=new v.Pawn("white",o+"2"),this.yourPieces[n]=new v.Pawn("black",o+"7");this.enemyPieces[15]=new s.King("white","e1"),this.yourPieces[15]=new s.King("black","e8")}},e.prototype.handleTurn=function(){var e,t;!0===this.isYourTurn&&(null===(e=this.player1.element.querySelector(".player_column__avatar"))||void 0===e||e.classList.add("player_turn"),null===(t=this.player2.element.querySelector(".player_column__avatar"))||void 0===t||t.classList.remove("player_turn"),this.validateYourTurn()),!1===this.isYourTurn&&this.yourPieces.forEach((function(e){e.element.onmousedown=null,e.element.onmouseup=null}))},e.prototype.validateYourTurn=function(){var e=this;!0===this.isCheck?(this.handleMate(),!1===this.isMate?this.handleCheck():this.timer.stopTimer()):(this.handleStaleMate(),document.querySelectorAll(".valid").forEach((function(e){return e.classList.remove("valid")})),this.yourPieces.forEach((function(t){var n=t.currentSquare;t.element.onmousedown=function(){e.handleMouseDown(t,event)},t.element.onmouseup=function(){e.handleMouseUp(t,n)}})))},e.prototype.handleMouseDown=function(e,t){var n=this;if(document.querySelectorAll(".valid").forEach((function(e){return e.classList.remove("valid")})),e.element.classList.contains("king"))return this.enemyPieces.forEach((function(e){return e.checkLegalMoves()})),e.validateMove(),!0===this.KSideCastlingEnabled&&this.handleKingSideCastling(),!0===this.QSideCastlingEnabled&&this.handleQueenSideCastling(),void e.handleMove(t);e.validateMove(),e.element.classList.contains("pawn")&&this.handleEnPassant(e),document.querySelectorAll(".valid").forEach((function(t){var i;if(!0===n.isYourTurn){document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")}));var o=void 0;""!==t.dataset.piece&&t.dataset.piece!==n.enemyColor||(o=t.dataset.piece),e.element.parentElement&&(t.dataset.piece=n.yourColor,e.element.parentElement.dataset.piece="",n.enemyPieces.forEach((function(e){e.element.parentElement!==t&&e.checkLegalMoves()})),t.dataset.piece=o,e.element.parentElement.dataset.piece=n.yourColor),(null===(i=n.yourPieces[15].element.parentElement)||void 0===i?void 0:i.classList.contains("attacked"))&&t.classList.remove("valid")}})),e.handleMove(t)},e.prototype.handleMouseUp=function(e,t){var n=this;setTimeout((function(){var i,a,l,r,c,s,u,v,m,h,p,y;if(document.querySelectorAll(".valid").forEach((function(e){e.classList.remove("valid")})),e.currentSquare&&(e.currentSquare.dataset.piece=""),e.currentSquare=e.element.parentElement,e.currentSquare&&(e.currentSquare.dataset.piece=e.pieceColor),e.currentSquare!==t&&!0===n.isYourTurn){if(e.element.classList.contains("king")&&(n.QSideCastlingEnabled||n.KSideCastlingEnabled)&&("black"===n.yourColor&&(e.currentSquare===document.querySelector("#g8")&&(null===(a=null===(i=document.querySelector("#h8"))||void 0===i?void 0:i.firstElementChild)||void 0===a||a.remove(),document.querySelector("#h8").dataset.piece="",n.yourPieces[0]=new f.Rook("black","f8")),e.currentSquare===document.querySelector("#c8")&&(null===(r=null===(l=document.querySelector("#a8"))||void 0===l?void 0:l.firstElementChild)||void 0===r||r.remove(),document.querySelector("#a8").dataset.piece="",n.yourPieces[1]=new f.Rook("black","d8")),n.QSideCastlingEnabled=!1,n.KSideCastlingEnabled=!1),"white"===n.yourColor&&(e.currentSquare===document.querySelector("#g1")&&(null===(s=null===(c=document.querySelector("#h1"))||void 0===c?void 0:c.firstElementChild)||void 0===s||s.remove(),document.querySelector("#h1").dataset.piece="",n.yourPieces[0]=new f.Rook("white","f1")),e.currentSquare===document.querySelector("#c1")&&(null===(v=null===(u=document.querySelector("#a1"))||void 0===u?void 0:u.firstElementChild)||void 0===v||v.remove(),document.querySelector("#a1").dataset.piece="",n.yourPieces[1]=new f.Rook("white","d1")),n.QSideCastlingEnabled=!1,n.KSideCastlingEnabled=!1)),e.element.classList.contains("rook")&&("h1"===(null==t?void 0:t.id)&&(n.KSideCastlingEnabled=!1),"a1"===(null==t?void 0:t.id)&&(n.QSideCastlingEnabled=!1),"h8"===(null==t?void 0:t.id)&&(n.KSideCastlingEnabled=!1),"a8"===(null==t?void 0:t.id)&&(n.QSideCastlingEnabled=!1)),!0===n.isEnPassant){var k=null===(m=e.currentSquare)||void 0===m?void 0:m.dataset.x,L=null===(h=e.currentSquare)||void 0===h?void 0:h.dataset.y,E=void 0;k&&L&&"white"===n.yourColor&&(E=document.querySelector("#"+d.xToLetter(k)+(+L-1))),k&&L&&"black"===n.yourColor&&(E=document.querySelector("#"+d.xToLetter(k)+(+L+1))),E&&(E.innerHTML="",E.dataset.piece=""),n.isEnPassant=!1}return"pawn"!==e.name||"8"!==(null===(p=e.currentSquare)||void 0===p?void 0:p.dataset.y)&&"1"!==(null===(y=e.currentSquare)||void 0===y?void 0:y.dataset.y)?(n.renderMove(e,t),n.lastMovedPiece=e,n.createCheck(),n.isYourTurn=!1,n.handleTurn(),void n.socket.send(JSON.stringify(new o.OnlineMove(t.id,e.name,e.currentSquare.id,e.name)))):void n.handlePromotion(e,t)}n.handleTurn()}),10)},e.prototype.createCheck=function(){var e,t,n,i,o,a;if(!0!==this.isYourTurn)for(var l=0,d=this.enemyPieces;l<d.length;l++){var r=d[l];document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),r.checkLegalMoves(),(null===(e=this.yourPieces[15].element.parentElement)||void 0===e?void 0:e.classList.contains("attacked"))&&(null===(t=this.yourPieces[15].element.parentElement)||void 0===t||t.classList.add("checked"),null===(n=r.element.parentElement)||void 0===n||n.classList.add("checked"),this.isCheck=!0)}if(!0===this.isYourTurn)for(var c=0,s=this.yourPieces;c<s.length;c++){var u=s[c];document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),u.checkLegalMoves(),(null===(i=this.enemyPieces[15].element.parentElement)||void 0===i?void 0:i.classList.contains("attacked"))&&(null===(o=this.enemyPieces[15].element.parentElement)||void 0===o||o.classList.add("checked"),null===(a=u.element.parentElement)||void 0===a||a.classList.add("checked"),this.isCheck=!0)}},e.prototype.handleCheck=function(){var e=this;document.querySelectorAll(".valid").forEach((function(e){return e.classList.remove("valid")})),!0===this.isYourTurn&&(this.enemyPieces.forEach((function(e){e.element.onmousedown=null,e.element.onmouseup=null})),this.yourPieces.forEach((function(t){var n=t.currentSquare;t.element.onmousedown=function(){e.handleCheckMouseDown(t,event)},t.element.onmouseup=function(){e.handleCheckMouseUp(t,n)}})))},e.prototype.handleCheckMouseDown=function(e,t){var n=this;!0===this.isYourTurn&&this.enemyPieces.forEach((function(e){e.checkLegalMoves()})),e.validateMove(),e.element.classList.contains("king")||document.querySelectorAll(".valid").forEach((function(e){var t;if(!0===n.isYourTurn){document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")}));var i=void 0;if(""!==e.dataset.piece&&e.dataset.piece!==n.enemyColor||(i=e.dataset.piece),e.dataset.piece===n.enemyColor&&e.classList.contains("checked")&&document.querySelectorAll(".checked").length<3)return;e.dataset.piece=n.yourColor,n.enemyPieces.forEach((function(e){e.checkLegalMoves()})),e.dataset.piece=i,(null===(t=n.yourPieces[15].element.parentElement)||void 0===t?void 0:t.classList.contains("attacked"))&&e.classList.remove("valid")}})),e.handleMove(t)},e.prototype.handleCheckMouseUp=function(e,t){var n=this;setTimeout((function(){var i,a;if(document.querySelectorAll(".square").forEach((function(t){t.classList.remove("valid"),e.currentSquare&&(e.currentSquare.dataset.piece=""),e.currentSquare=e.element.parentElement,e.currentSquare&&(e.currentSquare.dataset.piece=e.pieceColor)})),e.currentSquare!==t&&!0===n.isYourTurn){if(document.querySelectorAll(".checked").forEach((function(e){return e.classList.remove("checked")})),!0===n.isEnPassant){var l=null===(i=e.currentSquare)||void 0===i?void 0:i.dataset.x,r=null===(a=e.currentSquare)||void 0===a?void 0:a.dataset.y,c=void 0;l&&r&&"white"===n.yourColor&&(c=document.querySelector("#"+d.xToLetter(l)+(+r-1))),l&&r&&"black"===n.yourColor&&(c=document.querySelector("#"+d.xToLetter(l)+(+r+1))),c&&(c.innerHTML="",c.dataset.piece=""),n.isEnPassant=!1}return n.lastMovedPiece=e,n.handlePromotion(e,t),n.isCheck=!1,n.createCheck(),n.isYourTurn=!1,n.socket.send(JSON.stringify(new o.OnlineMove(t.id,e.name,e.currentSquare.id,e.name))),void n.handleTurn()}n.handleTurn()}),1)},e.prototype.handleKingSideCastling=function(){if(!0===this.isYourTurn&&"white"===this.yourColor){var e=document.querySelector("#f1"),t=document.querySelector("#g1");if(""===t.dataset.piece&&""===e.dataset.piece&&!0===this.KSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.enemyPieces.forEach((function(e){return e.checkLegalMoves()})),(null==t?void 0:t.classList.contains("attacked"))||(null==e?void 0:e.classList.contains("attacked")))return;null==t||t.classList.add("valid")}}if(!0===this.isYourTurn&&"black"===this.yourColor){var n=document.querySelector("#f8"),i=document.querySelector("#g8");if(""===i.dataset.piece&&""===n.dataset.piece&&!0===this.KSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.enemyPieces.forEach((function(e){return e.checkLegalMoves()})),(null==i?void 0:i.classList.contains("attacked"))||(null==n?void 0:n.classList.contains("attacked")))return;null==i||i.classList.add("valid")}}},e.prototype.handleQueenSideCastling=function(){if(!0===this.isYourTurn&&"white"===this.yourColor){var e=document.querySelector("#c1"),t=document.querySelector("#d1"),n=document.querySelector("#b1");if(""===e.dataset.piece&&""===t.dataset.piece&&""===n.dataset.piece&&!0===this.QSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.enemyPieces.forEach((function(e){return e.checkLegalMoves()})),(null==e?void 0:e.classList.contains("attacked"))||(null==t?void 0:t.classList.contains("attacked"))||(null==n?void 0:n.classList.contains("attacked")))return;null==e||e.classList.add("valid")}}if(!0===this.isYourTurn&&"black"===this.yourColor){var i=document.querySelector("#c8"),o=document.querySelector("#d8"),a=document.querySelector("#b8");if(""===i.dataset.piece&&""===o.dataset.piece&&""===a.dataset.piece&&!0===this.QSideCastlingEnabled){if(document.querySelectorAll(".attacked").forEach((function(e){e.classList.remove("attacked")})),this.enemyPieces.forEach((function(e){return e.checkLegalMoves()})),(null==i?void 0:i.classList.contains("attacked"))||(null==o?void 0:o.classList.contains("attacked"))||(null==a?void 0:a.classList.contains("attacked")))return;null==i||i.classList.add("valid")}}},e.prototype.handleMate=function(){var e,t=this;if(!0===this.isYourTurn&&(this.yourPieces.forEach((function(e){e.validateMove(),document.querySelectorAll(".valid").forEach((function(e){var n,i;document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),""!==e.dataset.piece&&e.dataset.piece!==t.enemyColor||(i=e.dataset.piece),e.dataset.piece===t.enemyColor&&e.classList.contains("checked")&&document.querySelectorAll(".checked").length<3||(e.dataset.piece=t.yourColor,t.enemyPieces.forEach((function(e){e.checkLegalMoves()})),e.dataset.piece=i,(null===(n=t.yourPieces[15].element.parentElement)||void 0===n?void 0:n.classList.contains("attacked"))&&e.classList.remove("valid"))}))})),document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove(".attacked")})),this.enemyPieces.forEach((function(e){return e.checkLegalMoves()})),this.yourPieces[15].validateMove(),0===document.querySelectorAll(".valid").length)){this.socket.send("mate");var n=new r.EndgamePopUp("You Lost");document.body.appendChild(n.element),this.socket.close(),null===(e=n.element.querySelector(".to-lobby"))||void 0===e||e.addEventListener("click",(function(){var e,t,i,o;n.removePopUp(),null===(e=document.querySelector(".player_column"))||void 0===e||e.remove(),null===(t=document.querySelector(".player_column"))||void 0===t||t.remove(),null===(i=document.querySelector(".chessboard"))||void 0===i||i.remove(),null===(o=document.querySelector(".lobby"))||void 0===o||o.classList.remove("hidden"),document.querySelector("header").innerHTML=(new c.Header).element.innerHTML,n.removePopUp()})),this.isMate=!0}},e.prototype.handleStaleMate=function(){var e=this;!0===this.isYourTurn&&(this.yourPieces.forEach((function(t){t.element.classList.contains("king")||(t.validateMove(),document.querySelectorAll(".valid").forEach((function(t){var n,i;document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove("attacked")})),""!==t.dataset.piece&&t.dataset.piece!==e.enemyColor||(i=t.dataset.piece),t.dataset.piece=e.yourColor,e.enemyPieces.forEach((function(e){e.checkLegalMoves()})),t.dataset.piece=i,(null===(n=e.yourPieces[15].element.parentElement)||void 0===n?void 0:n.classList.contains("attacked"))&&t.classList.remove("valid")})))})),document.querySelectorAll(".attacked").forEach((function(e){return e.classList.remove(".attacked")})),this.enemyPieces.forEach((function(e){return e.checkLegalMoves()})),this.yourPieces[15].validateMove(),0===document.querySelectorAll(".valid").length&&(this.isStaleMate=!0))},e.prototype.handleEnPassant=function(e){var t,n,i,o,a,l,r,c,s,u,v,m,h,p,y,f;if(!0===this.isYourTurn&&"white"===this.yourColor){var k=null===(n=null===(t=this.lastMovedEnemyPiece)||void 0===t?void 0:t.enemyPiece.parentElement)||void 0===n?void 0:n.dataset.x,L=null===(o=null===(i=this.lastMovedEnemyPiece)||void 0===i?void 0:i.enemyPiece.parentElement)||void 0===o?void 0:o.dataset.y;k&&L&&(null===(a=e.element.parentElement)||void 0===a?void 0:a.dataset.x)&&(+k==+e.element.parentElement.dataset.x-1||+k==+e.element.parentElement.dataset.x+1)&&L===e.element.parentElement.dataset.y&&"7"===(null===(l=this.lastMovedEnemyPiece)||void 0===l?void 0:l.initialSquare.split("")[1])&&"5"===L&&(null===(r=this.lastMovedEnemyPiece)||void 0===r?void 0:r.enemyPiece.classList.contains("pawn_black"))&&(null===(c=document.querySelector("#"+d.xToLetter(k)+(+L+1)))||void 0===c||c.classList.add("valid"),this.isEnPassant=!0)}!0===this.isYourTurn&&"black"===this.yourColor&&(k=null===(u=null===(s=this.lastMovedEnemyPiece)||void 0===s?void 0:s.enemyPiece.parentElement)||void 0===u?void 0:u.dataset.x,L=null===(m=null===(v=this.lastMovedEnemyPiece)||void 0===v?void 0:v.enemyPiece.parentElement)||void 0===m?void 0:m.dataset.y,k&&L&&(null===(h=e.element.parentElement)||void 0===h?void 0:h.dataset.x)&&(+k==+e.element.parentElement.dataset.x-1||+k==+e.element.parentElement.dataset.x+1)&&L===e.element.parentElement.dataset.y&&"2"===(null===(p=this.lastMovedEnemyPiece)||void 0===p?void 0:p.initialSquare.split("")[1])&&"4"===L&&(null===(y=this.lastMovedEnemyPiece)||void 0===y?void 0:y.enemyPiece.classList.contains("pawn_white"))&&(null===(f=document.querySelector("#"+d.xToLetter(k)+(+L-1)))||void 0===f||f.classList.add("valid"),this.isEnPassant=!0))},e.prototype.handlePromotion=function(e,t){var n,i,l,d,r=this;if(!0===this.isYourTurn&&"8"===(null===(n=e.currentSquare)||void 0===n?void 0:n.dataset.y)&&e.element.classList.contains("pawn_white")){e.currentSquare.innerHTML="";var c=new p.PromotionPopUp("white");document.body.appendChild(c.element),null===(i=document.querySelector(".pop-up"))||void 0===i||i.querySelectorAll("button").forEach((function(n){n.addEventListener("click",(function(n){var i=e.currentSquare;i&&(i.innerHTML="","queen"===n.target.dataset.piece?(r.yourPieces.push(new y.Queen("white",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"queen")))):"rook"===n.target.dataset.piece?(r.yourPieces.push(new f.Rook("white",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"rook")))):"knight"===n.target.dataset.piece?(r.yourPieces.push(new u.Knight("white",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"knight")))):"bishop"===n.target.dataset.piece&&(r.yourPieces.push(new a.Bishop("white",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"bishop"))))),r.isYourTurn=!0,r.createCheck(),r.isYourTurn=!1,r.handleMate(),c.removePopUp()}))}))}if(!0===this.isYourTurn&&"1"===(null===(l=e.currentSquare)||void 0===l?void 0:l.dataset.y)&&e.element.classList.contains("pawn_black")){e.currentSquare.innerHTML="";var s=new p.PromotionPopUp("black");document.body.appendChild(s.element),null===(d=document.querySelector(".pop-up"))||void 0===d||d.querySelectorAll("button").forEach((function(n){n.addEventListener("click",(function(n){var i=e.currentSquare;i&&(i.innerHTML="","queen"===n.target.dataset.piece?(r.yourPieces.push(new y.Queen("black",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"queen")))):"rook"===n.target.dataset.piece?(r.yourPieces.push(new f.Rook("black",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"rook")))):"knight"===n.target.dataset.piece?(r.yourPieces.push(new u.Knight("black",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"knight")))):"bishop"===n.target.dataset.piece&&(r.yourPieces.push(new a.Bishop("black",i.id)),r.socket.send(JSON.stringify(new o.OnlineMove(t.id,"pawn",e.currentSquare.id,"bishop"))))),r.isYourTurn=!1,r.createCheck(),r.isYourTurn=!0,r.handleMate(),s.removePopUp()}))}))}},e.prototype.renderEnemyMove=function(e,t,n){"rook"===e&&this.player2.createMove("R",t,n,this.timer.element.innerText),"queen"===e&&this.player2.createMove("Q",t,n,this.timer.element.innerText),"pawn"===e&&this.player2.createMove("",t,n,this.timer.element.innerText),"king"===e&&this.player2.createMove("K",t,n,this.timer.element.innerText),"knight"===e&&this.player2.createMove("N",t,n,this.timer.element.innerText),"bishop"===e&&this.player2.createMove("B",t,n,this.timer.element.innerText)},e.prototype.renderMove=function(e,t){!0===this.isYourTurn&&(e.element.classList.contains("rook")&&this.player1.createMove("R",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("queen")&&this.player1.createMove("Q",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("pawn")&&this.player1.createMove("",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("king")&&this.player1.createMove("K",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("knight")&&this.player1.createMove("N",t.id,e.currentSquare.id,this.timer.element.innerText),e.element.classList.contains("bishop")&&this.player1.createMove("B",t.id,e.currentSquare.id,this.timer.element.innerText))},e}();t.OnlineGame=L},652:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Pawn=void 0;var a=n(492),l=n(940),d=function(e){function t(t,n){var i,o=e.call(this,"pawn",t)||this;return o.name="pawn","white"===o.pieceColor&&o.element.classList.add("pawn_white"),"black"===o.pieceColor&&o.element.classList.add("pawn_black"),o.currentSquare=document.getElementById(n),null===(i=o.currentSquare)||void 0===i||i.appendChild(o.element),o.currentSquare&&(o.currentSquare.dataset.piece=o.pieceColor),o}return o(t,e),t.prototype.validateMove=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f,k,L,E,b=this.element.parentElement,g=null==b?void 0:b.dataset.x,w=null==b?void 0:b.dataset.y;g&&w&&("white"===this.pieceColor&&("2"===w&&""===(null===(e=document.getElementById(""+l.xToLetter(g)+(+w+2)))||void 0===e?void 0:e.dataset.piece)&&(null===(t=document.getElementById(""+l.xToLetter(g)+(+w+2)))||void 0===t||t.classList.add("valid")),""===(null===(n=document.getElementById(""+l.xToLetter(g)+(+w+1)))||void 0===n?void 0:n.dataset.piece)&&(null===(i=document.getElementById(""+l.xToLetter(g)+(+w+1)))||void 0===i||i.classList.add("valid")),""!==(null===(o=document.getElementById(""+l.xToLetter(""+(+g+1))+(+w+1)))||void 0===o?void 0:o.dataset.piece)&&(null===(a=document.getElementById(""+l.xToLetter(""+(+g+1))+(+w+1)))||void 0===a?void 0:a.dataset.piece)!==this.pieceColor&&(null===(d=document.getElementById(""+l.xToLetter(""+(+g+1))+(+w+1)))||void 0===d||d.classList.add("valid")),""!==(null===(r=document.getElementById(""+l.xToLetter(""+(+g-1))+(+w+1)))||void 0===r?void 0:r.dataset.piece)&&(null===(c=document.getElementById(""+l.xToLetter(""+(+g-1))+(+w+1)))||void 0===c?void 0:c.dataset.piece)!==this.pieceColor&&(null===(s=document.getElementById(""+l.xToLetter(""+(+g-1))+(+w+1)))||void 0===s||s.classList.add("valid"))),"black"===this.pieceColor&&("7"===w&&""===(null===(u=document.getElementById(""+l.xToLetter(g)+(+w-2)))||void 0===u?void 0:u.dataset.piece)&&(null===(v=document.getElementById(""+l.xToLetter(g)+(+w-2)))||void 0===v||v.classList.add("valid")),""===(null===(m=document.getElementById(""+l.xToLetter(g)+(+w-1)))||void 0===m?void 0:m.dataset.piece)&&(null===(h=document.getElementById(""+l.xToLetter(g)+(+w-1)))||void 0===h||h.classList.add("valid")),""!==(null===(p=document.getElementById(""+l.xToLetter(""+(+g+1))+(+w-1)))||void 0===p?void 0:p.dataset.piece)&&(null===(y=document.getElementById(""+l.xToLetter(""+(+g+1))+(+w-1)))||void 0===y?void 0:y.dataset.piece)!==this.pieceColor&&(null===(f=document.getElementById(""+l.xToLetter(""+(+g+1))+(+w-1)))||void 0===f||f.classList.add("valid")),""!==(null===(k=document.getElementById(""+l.xToLetter(""+(+g-1))+(+w-1)))||void 0===k?void 0:k.dataset.piece)&&(null===(L=document.getElementById(""+l.xToLetter(""+(+g-1))+(+w-1)))||void 0===L?void 0:L.dataset.piece)!==this.pieceColor&&(null===(E=document.getElementById(""+l.xToLetter(""+(+g-1))+(+w-1)))||void 0===E||E.classList.add("valid"))))},t.prototype.checkLegalMoves=function(){var e,t,n,i,o=this.element.parentElement,a=null==o?void 0:o.dataset.x,d=null==o?void 0:o.dataset.y;a&&d&&("white"===this.pieceColor&&(null===(e=document.getElementById(""+l.xToLetter(""+(+a+1))+(+d+1)))||void 0===e||e.classList.add("attacked"),null===(t=document.getElementById(""+l.xToLetter(""+(+a-1))+(+d+1)))||void 0===t||t.classList.add("attacked")),"black"===this.pieceColor&&(null===(n=document.getElementById(""+l.xToLetter(""+(+a+1))+(+d-1)))||void 0===n||n.classList.add("attacked"),null===(i=document.getElementById(""+l.xToLetter(""+(+a-1))+(+d-1)))||void 0===i||i.classList.add("attacked")))},t}(a.Piece);t.Pawn=d},821:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OnlinePlayer=void 0;var a=n(583),l=n(467);n(434);var d=function(e){function t(t,n){void 0===n&&(n=!1);var i=e.call(this,"div",["player_column"])||this;return i.renderPlayer(t,n),i}return o(t,e),t.prototype.renderPlayer=function(e,t){var n;!0!==t?(""!==e&&(n=e[0],void 0!==e.split(" ")[1]&&(n+=e.split(" ")[1][0])),void 0===n&&(n="P2"),this.element.innerHTML='\n        <div class="player_column__avatar">'+n+'</div>\n        <div class="player_column__name">'+e+'</div>\n        <div class="player_column__buttons">\n        <button class="player_button__resign" id=\'resign_button\'></button>\n        <button class="player_button__draw" id=\'draw_button\'>&half;</button>  \n        </div>\n        <div class="player_column__moves"></div>\n        '):this.element.innerHTML='\n        <div class="player_column__avatar"></div>\n        <div class="player_column__name"></div>\n        <div class="player_column__buttons">\n        <button class="player_button__resign disabled" disabled></button>\n        <button class="player_button__draw disabled" disabled>&half;</button>  \n        </div>\n        <div class="player_column__moves"></div>\n        '},t.prototype.createMove=function(e,t,n,i){var o;null===(o=this.element.lastElementChild)||void 0===o||o.appendChild(new l.Move(e,t,n,i).element)},t}(a.BaseComponent);t.OnlinePlayer=d},559:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var a=n(583),l=n(467);n(800);var d=function(e){function t(t,n){var i=e.call(this,"div",["player_column"])||this;return i.renderPlayer(t,n),i}return o(t,e),t.prototype.renderPlayer=function(e,t){var n=e[0];void 0!==e.split(" ")[1]&&""!==e.split(" ")[1]&&(n+=e.split(" ")[1][0]),void 0===n&&(n=""),this.element.innerHTML='\n        <div class="player_column__avatar">'+n+'</div>\n        <div class="player_column__name">'+e+'</div>\n        <div class="player_column__buttons">\n        <button class="player_button__resign" id=\'resign_'+t+"'></button>\n        <button class=\"player_button__draw\" id='draw_"+t+'\'>&half;</button>  \n        </div>\n        <div class="player_column__moves"></div>\n        '},t.prototype.createMove=function(e,t,n,i){var o;null===(o=this.element.lastElementChild)||void 0===o||o.appendChild(new l.Move(e,t,n,i).element)},t}(a.BaseComponent);t.Player=d},498:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PregamePopUp=void 0;var a=n(765);n(604);var l=function(e){function t(){var t,n=e.call(this)||this;return null===(t=n.element.firstElementChild)||void 0===t||t.classList.add("pregamePopUp"),n.renderPopUp(),n}return o(t,e),t.prototype.renderPopUp=function(){this.element.firstElementChild.innerHTML='\n        <div class=\'loader\'>\n        <div class=\'loader_body\'>\n            <div class="circle circle-1"></div>\n            <div class="circle circle-2"></div>\n            <div class="circle circle-3"></div>\n            <div class="circle circle-4"></div>\n            <div class="circle circle-5"></div></div>\n        <div class=\'loader_text\'>Waiting for the opponent</div>\n        </div>\n        <button class=\'to-lobby-online\'>To Lobby</button>\n        '},t}(a.PopUp);t.PregamePopUp=l},198:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PromotionPopUp=void 0;var a=n(765);n(283);var l=function(e){function t(t){var n=e.call(this)||this,i=n.element.querySelector(".pop-up_body");return i&&(i.innerHTML="\n        <button class = 'promote_queen__"+t+"' data-piece = 'queen'></button>\n        <button class = 'promote_rook__"+t+"' data-piece = 'rook'></button>\n        <button class = 'promote_knight__"+t+"' data-piece = 'knight'></button>\n        <button class = 'promote_bishop__"+t+"' data-piece = 'bishop'></button>\n        "),n}return o(t,e),t}(a.PopUp);t.PromotionPopUp=l},146:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Queen=void 0;var a=n(492),l=n(940),d=function(e){function t(t,n){var i,o=e.call(this,"queen",t)||this;return o.name="queen","white"===o.pieceColor&&o.element.classList.add("queen_white"),"black"===o.pieceColor&&o.element.classList.add("queen_black"),o.currentSquare=document.getElementById(n),null===(i=o.currentSquare)||void 0===i||i.appendChild(o.element),o.currentSquare&&(o.currentSquare.dataset.piece=o.pieceColor),o}return o(t,e),t.prototype.validateMove=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f,k,L,E,b,g,w,_,S,q,P,T,C,x,M,B,I=this.element.parentElement,O=null==I?void 0:I.dataset.x,A=null==I?void 0:I.dataset.y;if(O){for(var j=+O+1;j<9;j++){var H=l.xToLetter(""+j);if((null===(e=document.getElementById(""+H+A))||void 0===e?void 0:e.dataset.piece)===this.pieceColor)break;if(null===(t=document.getElementById(""+H+A))||void 0===t||t.classList.add("valid"),(null===(n=document.getElementById(""+H+A))||void 0===n?void 0:n.dataset.piece)!==this.pieceColor&&""!==(null===(i=document.getElementById(""+H+A))||void 0===i?void 0:i.dataset.piece))break}for(j=+O-1;j>0&&(H=l.xToLetter(""+j),(null===(o=document.getElementById(""+H+A))||void 0===o?void 0:o.dataset.piece)!==this.pieceColor)&&(null===(a=document.getElementById(""+H+A))||void 0===a||a.classList.add("valid"),(null===(d=document.getElementById(""+H+A))||void 0===d?void 0:d.dataset.piece)===this.pieceColor||""===(null===(r=document.getElementById(""+H+A))||void 0===r?void 0:r.dataset.piece));j--);}if(A){for(j=+A+1;j<9&&(H=l.xToLetter(""+O),(null===(c=document.getElementById(""+H+j))||void 0===c?void 0:c.dataset.piece)!==this.pieceColor)&&(null===(s=document.getElementById(""+H+j))||void 0===s||s.classList.add("valid"),(null===(u=document.getElementById(""+H+j))||void 0===u?void 0:u.dataset.piece)===this.pieceColor||""===(null===(v=document.getElementById(""+H+j))||void 0===v?void 0:v.dataset.piece));j++);for(j=+A-1;j<9&&(H=l.xToLetter(""+O),(null===(m=document.getElementById(""+H+j))||void 0===m?void 0:m.dataset.piece)!==this.pieceColor)&&(null===(h=document.getElementById(""+H+j))||void 0===h||h.classList.add("valid"),(null===(p=document.getElementById(""+H+j))||void 0===p?void 0:p.dataset.piece)===this.pieceColor||""===(null===(y=document.getElementById(""+H+j))||void 0===y?void 0:y.dataset.piece));j--);}if(O&&A){j=+O-1;for(var U=+A+1;j>0&&(H=l.xToLetter(""+j),(null===(f=document.getElementById(""+H+U))||void 0===f?void 0:f.dataset.piece)!==this.pieceColor)&&(null===(k=document.getElementById(""+H+U))||void 0===k||k.classList.add("valid"),(null===(L=document.getElementById(""+H+U))||void 0===L?void 0:L.dataset.piece)===this.pieceColor||""===(null===(E=document.getElementById(""+H+U))||void 0===E?void 0:E.dataset.piece));j--,U++);for(j=+O+1,U=+A-1;j<9&&(H=l.xToLetter(""+j),(null===(b=document.getElementById(""+H+U))||void 0===b?void 0:b.dataset.piece)!==this.pieceColor)&&(null===(g=document.getElementById(""+H+U))||void 0===g||g.classList.add("valid"),(null===(w=document.getElementById(""+H+U))||void 0===w?void 0:w.dataset.piece)===this.pieceColor||""===(null===(_=document.getElementById(""+H+U))||void 0===_?void 0:_.dataset.piece));j++,U--);}if(A&&O){for(j=+O+1,U=+A+1;j<9&&(H=l.xToLetter(""+j),(null===(S=document.getElementById(""+H+U))||void 0===S?void 0:S.dataset.piece)!==this.pieceColor)&&(null===(q=document.getElementById(""+H+U))||void 0===q||q.classList.add("valid"),(null===(P=document.getElementById(""+H+U))||void 0===P?void 0:P.dataset.piece)===this.pieceColor||""===(null===(T=document.getElementById(""+H+U))||void 0===T?void 0:T.dataset.piece));j++,U++);for(j=+O-1,U=+A-1;j<9&&(H=l.xToLetter(""+j),(null===(C=document.getElementById(""+H+U))||void 0===C?void 0:C.dataset.piece)!==this.pieceColor)&&(null===(x=document.getElementById(""+H+U))||void 0===x||x.classList.add("valid"),(null===(M=document.getElementById(""+H+U))||void 0===M?void 0:M.dataset.piece)===this.pieceColor||""===(null===(B=document.getElementById(""+H+U))||void 0===B?void 0:B.dataset.piece));j--,U--);}},t.prototype.checkLegalMoves=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f,k,L,E,b,g,w,_,S,q,P,T,C,x,M,B,I;I="white"===this.pieceColor?"black":"white";var O=this.element.parentElement,A=null==O?void 0:O.dataset.x,j=null==O?void 0:O.dataset.y;if(A){for(var H=+A+1;H<9;H++){var U=l.xToLetter(""+H);if(null===(e=document.getElementById(""+U+j))||void 0===e||e.classList.add("attacked"),""!==(null===(t=document.getElementById(""+U+j))||void 0===t?void 0:t.dataset.piece)&&!(null===(i=null===(n=document.getElementById(""+U+j))||void 0===n?void 0:n.firstElementChild)||void 0===i?void 0:i.classList.contains("king_"+I)))break}for(H=+A-1;H>0&&(U=l.xToLetter(""+H),null===(o=document.getElementById(""+U+j))||void 0===o||o.classList.add("attacked"),""===(null===(a=document.getElementById(""+U+j))||void 0===a?void 0:a.dataset.piece)||(null===(r=null===(d=document.getElementById(""+U+j))||void 0===d?void 0:d.firstElementChild)||void 0===r?void 0:r.classList.contains("king_"+I)));H--);}if(j){for(H=+j+1;H<9&&(U=l.xToLetter(""+A),null===(c=document.getElementById(""+U+H))||void 0===c||c.classList.add("attacked"),""===(null===(s=document.getElementById(""+U+H))||void 0===s?void 0:s.dataset.piece)||(null===(v=null===(u=document.getElementById(""+U+H))||void 0===u?void 0:u.firstElementChild)||void 0===v?void 0:v.classList.contains("king_"+I)));H++);for(H=+j-1;H<9&&(U=l.xToLetter(""+A),null===(m=document.getElementById(""+U+H))||void 0===m||m.classList.add("attacked"),""===(null===(h=document.getElementById(""+U+H))||void 0===h?void 0:h.dataset.piece)||(null===(y=null===(p=document.getElementById(""+U+H))||void 0===p?void 0:p.firstElementChild)||void 0===y?void 0:y.classList.contains("king_"+I)));H--);}if(A&&j){H=+A-1;for(var K=+j+1;H>0&&(U=l.xToLetter(""+H),null===(f=document.getElementById(""+U+K))||void 0===f||f.classList.add("attacked"),""===(null===(k=document.getElementById(""+U+K))||void 0===k?void 0:k.dataset.piece)||(null===(E=null===(L=document.getElementById(""+U+K))||void 0===L?void 0:L.firstElementChild)||void 0===E?void 0:E.classList.contains("king_"+I)));H--,K++);for(H=+A+1,K=+j-1;H<9&&(U=l.xToLetter(""+H),null===(b=document.getElementById(""+U+K))||void 0===b||b.classList.add("attacked"),""===(null===(g=document.getElementById(""+U+K))||void 0===g?void 0:g.dataset.piece)||(null===(_=null===(w=document.getElementById(""+U+K))||void 0===w?void 0:w.firstElementChild)||void 0===_?void 0:_.classList.contains("king_"+I)));H++,K--);}if(j&&A){for(H=+A+1,K=+j+1;H<9&&(U=l.xToLetter(""+H),null===(S=document.getElementById(""+U+K))||void 0===S||S.classList.add("attacked"),""===(null===(q=document.getElementById(""+U+K))||void 0===q?void 0:q.dataset.piece)||(null===(T=null===(P=document.getElementById(""+U+K))||void 0===P?void 0:P.firstElementChild)||void 0===T?void 0:T.classList.contains("king_"+I)));H++,K++);for(H=+A-1,K=+j-1;H<9&&(U=l.xToLetter(""+H),null===(C=document.getElementById(""+U+K))||void 0===C||C.classList.add("attacked"),""===(null===(x=document.getElementById(""+U+K))||void 0===x?void 0:x.dataset.piece)||(null===(B=null===(M=document.getElementById(""+U+K))||void 0===M?void 0:M.firstElementChild)||void 0===B?void 0:B.classList.contains("king_"+I)));H--,K--);}},t}(a.Piece);t.Queen=d},613:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Rook=void 0;var a=n(492),l=n(940),d=function(e){function t(t,n){var i,o=e.call(this,"rook",t)||this;return o.name="rook","white"===o.pieceColor&&o.element.classList.add("rook_white"),"black"===o.pieceColor&&o.element.classList.add("rook_black"),o.currentSquare=document.getElementById(n),null===(i=o.currentSquare)||void 0===i||i.appendChild(o.element),o.currentSquare&&(o.currentSquare.dataset.piece=o.pieceColor),o}return o(t,e),t.prototype.validateMove=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f=this.element.parentElement,k=null==f?void 0:f.dataset.x,L=null==f?void 0:f.dataset.y;if(k){for(var E=+k+1;E<9;E++){var b=l.xToLetter(""+E);if((null===(e=document.getElementById(""+b+L))||void 0===e?void 0:e.dataset.piece)===this.pieceColor)break;if(null===(t=document.getElementById(""+b+L))||void 0===t||t.classList.add("valid"),(null===(n=document.getElementById(""+b+L))||void 0===n?void 0:n.dataset.piece)!==this.pieceColor&&""!==(null===(i=document.getElementById(""+b+L))||void 0===i?void 0:i.dataset.piece))break}for(E=+k-1;E>0&&(b=l.xToLetter(""+E),(null===(o=document.getElementById(""+b+L))||void 0===o?void 0:o.dataset.piece)!==this.pieceColor)&&(null===(a=document.getElementById(""+b+L))||void 0===a||a.classList.add("valid"),(null===(d=document.getElementById(""+b+L))||void 0===d?void 0:d.dataset.piece)===this.pieceColor||""===(null===(r=document.getElementById(""+b+L))||void 0===r?void 0:r.dataset.piece));E--);}if(L){for(E=+L+1;E<9&&(b=l.xToLetter(""+k),(null===(c=document.getElementById(""+b+E))||void 0===c?void 0:c.dataset.piece)!==this.pieceColor)&&(null===(s=document.getElementById(""+b+E))||void 0===s||s.classList.add("valid"),(null===(u=document.getElementById(""+b+E))||void 0===u?void 0:u.dataset.piece)===this.pieceColor||""===(null===(v=document.getElementById(""+b+E))||void 0===v?void 0:v.dataset.piece));E++);for(E=+L-1;E<9&&(b=l.xToLetter(""+k),(null===(m=document.getElementById(""+b+E))||void 0===m?void 0:m.dataset.piece)!==this.pieceColor)&&(null===(h=document.getElementById(""+b+E))||void 0===h||h.classList.add("valid"),(null===(p=document.getElementById(""+b+E))||void 0===p?void 0:p.dataset.piece)===this.pieceColor||""===(null===(y=document.getElementById(""+b+E))||void 0===y?void 0:y.dataset.piece));E--);}},t.prototype.checkLegalMoves=function(){var e,t,n,i,o,a,d,r,c,s,u,v,m,h,p,y,f;f="white"===this.pieceColor?"black":"white";var k=this.element.parentElement,L=null==k?void 0:k.dataset.x,E=null==k?void 0:k.dataset.y;if(L){for(var b=+L+1;b<9;b++){var g=l.xToLetter(""+b);if(null===(e=document.getElementById(""+g+E))||void 0===e||e.classList.add("attacked"),""!==(null===(t=document.getElementById(""+g+E))||void 0===t?void 0:t.dataset.piece)&&!(null===(i=null===(n=document.getElementById(""+g+E))||void 0===n?void 0:n.firstElementChild)||void 0===i?void 0:i.classList.contains("king_"+f)))break}for(b=+L-1;b>0&&(g=l.xToLetter(""+b),null===(o=document.getElementById(""+g+E))||void 0===o||o.classList.add("attacked"),""===(null===(a=document.getElementById(""+g+E))||void 0===a?void 0:a.dataset.piece)||(null===(r=null===(d=document.getElementById(""+g+E))||void 0===d?void 0:d.firstElementChild)||void 0===r?void 0:r.classList.contains("king_"+f)));b--);}if(E){for(b=+E+1;b<9&&(g=l.xToLetter(""+L),null===(c=document.getElementById(""+g+b))||void 0===c||c.classList.add("attacked"),""===(null===(s=document.getElementById(""+g+b))||void 0===s?void 0:s.dataset.piece)||(null===(v=null===(u=document.getElementById(""+g+b))||void 0===u?void 0:u.firstElementChild)||void 0===v?void 0:v.classList.contains("king_"+f)));b++);for(b=+E-1;b<9&&(g=l.xToLetter(""+L),null===(m=document.getElementById(""+g+b))||void 0===m||m.classList.add("attacked"),""===(null===(h=document.getElementById(""+g+b))||void 0===h?void 0:h.dataset.piece)||(null===(y=null===(p=document.getElementById(""+g+b))||void 0===p?void 0:p.firstElementChild)||void 0===y?void 0:y.classList.contains("king_"+f)));b--);}},t}(a.Piece);t.Rook=d},400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.storage=void 0,t.storage={player1Name:"Player 1",player2Name:"Player 2"}},981:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var a=n(583);n(580);var l=function(e){function t(t){var n=e.call(this,"div",["timer"])||this;return n.minutes=0,n.seconds=0,n.amountTick=0,n.runTimer=!0,n.element.innerHTML='\n      <div class="timer__inner">00:00</div>\n    ',t.appendChild(n.element),n.runTimer=!0,n.amountTick=0,n}return o(t,e),t.prototype.startTimer=function(){var e=this;this.runTimer&&(this.timeOutFunc=setInterval((function(){return e.updateValue()}),1e3))},t.prototype.stopTimer=function(){return this.runTimer=!1,this.timeOutFunc&&clearTimeout(this.timeOutFunc),this.element.firstElementChild&&(this.element.firstElementChild.textContent="00:00"),this.amountTick},t.prototype.updateValue=function(){this.amountTick++,this.minutes=Math.floor(this.amountTick/60),this.seconds=this.amountTick-60*this.minutes,this.element.firstElementChild&&(this.minutes<10&&this.seconds<10?this.element.firstElementChild.textContent="0"+this.minutes+":0"+this.seconds:this.minutes<10?this.element.firstElementChild.textContent="0"+this.minutes+":"+this.seconds:this.seconds<10?this.element.firstElementChild.textContent=this.minutes+":0"+this.seconds:this.element.firstElementChild.textContent=this.minutes+":"+this.seconds)},t}(a.BaseComponent);t.Timer=l},367:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnemyPiece=void 0;t.EnemyPiece=function(e,t){this.enemyPiece=e,this.initialSquare=t}},794:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineMove=void 0;t.OnlineMove=function(e,t,n,i,o){void 0===o&&(o=!0),this.initialSquare=e,this.initialPiece=t,this.finalSquare=n,this.finalPiece=i,this.isBroadcast=o,this.initialPiece=t,this.initialSquare=e,this.finalPiece=i,this.finalSquare=n,this.isBroadcast=o}},765:function(e,t,n){var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PopUp=void 0;var a=n(583);n(603);var l=function(e){function t(){var t=e.call(this,"div",["pop-up"])||this,n=document.createElement("div");return n.classList.add("pop-up_body"),t.element.appendChild(n),t}return o(t,e),t.prototype.removePopUp=function(){this.element.remove()},t}(a.BaseComponent);t.PopUp=l}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,i),a.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=i(752),i(387),new e.App})();